<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TastyBites | Restaurant & Delivery</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
   <!-- Add these lines to your <head> section -->
<script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
<script src="cloud-storage.js"></script>
   <style>
        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #ff6b6b;
            --primary-dark: #ff4757;
            --secondary: #2d3436;
            --light: #f8f9fa;
            --dark: #2d3436;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e74c3c;
            --info: #0984e3;
            --border-radius: 12px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.12);
            --gradient-primary: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            --gradient-success: linear-gradient(135deg, #00b894 0%, #00d8a7 100%);
            --gradient-warning: linear-gradient(135deg, #fdcb6e 0%, #ffeaa7 100%);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.7;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 25px;
        }

         /* ===== CROSS-TAB COMMUNICATION STYLES ===== */
        .sync-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 184, 148, 0.3);
            z-index: 9999;
            display: none;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.5s ease-out;
            max-width: 350px;
        }
        
        .sync-notification.show {
            display: flex;
        }
        
        .sync-notification.hide {
            animation: slideOutRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* Add to existing styles - no need to duplicate all CSS */
        /* ... (all previous CSS remains exactly the same) ... */
  
        /* ===== MENU MANAGEMENT STYLES ===== */
        .menu-management-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .menu-item-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
        }

        .menu-item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
        }

        .menu-item-card.out-of-stock {
            opacity: 0.7;
            position: relative;
        }

        .menu-item-card.out-of-stock:before {
            content: 'OUT OF STOCK';
            position: absolute;
            top: 20px;
            left: 0;
            background: rgba(231, 76, 60, 0.9);
            color: white;
            padding: 8px 15px;
            font-weight: 600;
            font-size: 14px;
            z-index: 2;
            border-radius: 0 5px 5px 0;
        }

        .menu-item-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 3px solid #f1f3f5;
        }

        .menu-item-content {
            padding: 20px;
        }

        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .menu-item-name {
            font-size: 20px;
            font-weight: 700;
            color: #2d3436;
            margin: 0;
        }

        .menu-item-price {
            font-size: 22px;
            font-weight: 800;
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            padding: 5px 12px;
            border-radius: 8px;
        }

        .menu-item-description {
            color: #636e72;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .menu-item-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-edit-menu {
            background: linear-gradient(135deg, #0984e3 0%, #00cec9 100%);
            color: white;
        }

        .btn-delete-menu {
            background: linear-gradient(135deg, #e74c3c 0%, #ff7979 100%);
            color: white;
        }

        .btn-toggle-stock {
            background: linear-gradient(135deg, #fdcb6e 0%, #ffeaa7 100%);
            color: #2d3436;
        }

        /* Menu Item Form */
        .menu-form-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .menu-form-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .menu-form-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: slideUp 0.4s ease;
        }

        .menu-form-header {
            padding: 30px;
            background: linear-gradient(135deg, #0984e3 0%, #00cec9 100%);
            color: white;
            border-radius: 20px 20px 0 0;
        }

        .menu-form-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .menu-form-body {
            padding: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-full-width {
            grid-column: 1 / -1;
        }

        .image-preview {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
            border: 2px dashed #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .image-preview-placeholder {
            text-align: center;
            color: #636e72;
            padding: 20px;
        }

        .image-preview-placeholder i {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
            color: #b2bec3;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        /* Announcement Management */
        .announcement-management {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
        }

        .announcement-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .announcement-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
        }

        .announcement-preview h4 {
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .announcement-preview-content {
            color: #636e72;
            font-size: 16px;
            line-height: 1.6;
        }

        .announcement-list {
            margin-top: 40px;
        }

        .announcement-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #fdcb6e;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .announcement-item-content {
            flex: 1;
        }

        .announcement-item-text {
            color: #2d3436;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .announcement-item-time {
            color: #636e72;
            font-size: 14px;
        }

        .announcement-item-actions {
            display: flex;
            gap: 10px;
        }

        .btn-remove-announcement {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-remove-announcement:hover {
            background: #e74c3c;
            color: white;
        }

        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #00b894;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .switch-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            color: #2d3436;
        }

        /* Add Item Button */
        .add-item-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background: white;
            border: 3px dashed #e9ecef;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 100%;
            min-height: 400px;
        }

        .add-item-btn:hover {
            border-color: #0984e3;
            background: rgba(9, 132, 227, 0.05);
            transform: translateY(-5px);
        }

        .add-item-btn i {
            font-size: 60px;
            color: #0984e3;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .add-item-btn h3 {
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 22px;
        }

        .add-item-btn p {
            color: #636e72;
            font-size: 14px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .menu-management-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .menu-item-actions {
                flex-direction: column;
            }
            
            .announcement-item {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .announcement-item-actions {
                align-self: flex-end;
            }
            
            .add-item-btn {
                min-height: 300px;
            }
        }

        /* Add to existing admin tabs */
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            padding: 0 20px;
            overflow-x: auto;
        }

        .admin-tab {
            padding: 15px 25px;
            background: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            color: #636e72;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            white-space: nowrap;
            flex-shrink: 0;
        }

        .admin-tab.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
        }

        .admin-tab:hover:not(.active) {
            background: #f1f3f5;
            transform: translateY(-2px);
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
        }

        .logo {
            font-size: 32px;
            font-weight: 800;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Playfair Display', serif;
            letter-spacing: -0.5px;
        }

        .logo i {
            font-size: 36px;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            margin: 0;
            padding: 0;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s ease;
            padding: 8px 16px;
            border-radius: 30px;
            position: relative;
        }

        nav a:before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gradient-primary);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        nav a:hover,
        nav a.active {
            color: var(--primary);
        }

        nav a:hover:before,
        nav a.active:before {
            width: 60%;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
            color: var(--dark);
            cursor: pointer;
            transition: transform 0.3s ease;
            padding: 10px;
            border-radius: 50%;
            background: var(--light);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-icon:hover {
            transform: translateY(-2px);
            background: var(--primary);
            color: white;
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(255, 107, 107, 0.3);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            min-height: calc(100vh - 220px);
            padding: 50px 0;
        }

        .page {
            display: none;
            animation: fadeIn 0.6s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: var(--gradient-primary);
            color: white;
            padding: 15px 35px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
            box-shadow: 0 6px 20px rgba(45, 52, 54, 0.2);
        }

        .btn-secondary:hover {
            box-shadow: 0 10px 25px rgba(45, 52, 54, 0.3);
        }

        .btn-success {
            background: var(--gradient-success);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.3);
        }

        .btn-success:hover {
            box-shadow: 0 10px 25px rgba(0, 184, 148, 0.4);
        }

        .btn-warning {
            background: var(--gradient-warning);
            color: #2d3436;
            box-shadow: 0 6px 20px rgba(253, 203, 110, 0.3);
        }

        .btn-warning:hover {
            box-shadow: 0 10px 25px rgba(253, 203, 110, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #0984e3 0%, #00cec9 100%);
            box-shadow: 0 6px 20px rgba(9, 132, 227, 0.3);
        }

        .btn-info:hover {
            box-shadow: 0 10px 25px rgba(9, 132, 227, 0.4);
        }

        .btn-sm {
            padding: 10px 22px;
            font-size: 14px;
            border-radius: 40px;
        }

        /* ===== HOME PAGE ===== */
        .hero {
            background: linear-gradient(rgba(45, 52, 54, 0.85), rgba(45, 52, 54, 0.9)),
                url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            text-align: center;
            padding: 120px 30px;
            border-radius: var(--border-radius);
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .hero:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-primary);
            opacity: 0.2;
            z-index: 1;
        }

        .hero>* {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 56px;
            margin-bottom: 25px;
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 20px;
            max-width: 750px;
            margin: 0 auto 40px;
            opacity: 0.95;
            font-weight: 300;
        }

        .page-title {
            font-size: 42px;
            margin-bottom: 40px;
            color: var(--dark);
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            position: relative;
            padding-bottom: 15px;
        }

        .page-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        /* ===== MENU ITEMS ===== */
        .menu-highlight {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 35px;
            margin-top: 50px;
        }

        .menu-item {
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.4s ease;
            position: relative;
        }

        .menu-item:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .menu-item img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .menu-item:hover img {
            transform: scale(1.05);
        }

        .menu-item-content {
            padding: 25px;
        }

        .menu-item h3 {
            font-size: 24px;
            margin-bottom: 12px;
            color: var(--dark);
            font-weight: 600;
        }

        .menu-item p {
            color: #666;
            margin-bottom: 20px;
            font-size: 15px;
            line-height: 1.6;
        }

        .menu-item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-size: 28px;
            font-weight: 700;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .add-to-cart {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.3);
        }

        .add-to-cart:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }

        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            top: 90px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }

        .toast {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(400px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.success {
            border-left-color: var(--success);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .toast.success .toast-icon {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--success);
        }

        .toast.warning .toast-icon {
            background-color: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }

        .toast.error .toast-icon {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .toast-message {
            font-size: 14px;
            color: #666;
        }

        .toast-close {
            background: none;
            border: none;
            color: #999;
            font-size: 16px;
            cursor: pointer;
            padding: 4px;
            transition: color 0.3s;
        }

        .toast-close:hover {
            color: var(--dark);
        }

        .toast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background-color: var(--primary);
            width: 100%;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            transform-origin: left;
            animation: progress 5s linear forwards;
        }

        .toast.success .toast-progress {
            background-color: var(--success);
        }

        .toast.warning .toast-progress {
            background-color: var(--warning);
        }

        .toast.error .toast-progress {
            background-color: var(--danger);
        }

        @keyframes progress {
            from {
                transform: scaleX(1);
            }

            to {
                transform: scaleX(0);
            }
        }

        /* ===== CONTACT PAGE ===== */
        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            width: 100%;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .contact-info h2 {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .contact-info p {
            margin-bottom: 20px;
            line-height: 1.7;
            font-size: 17px;
            color: #666;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 25px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-left: 5px solid var(--primary);
        }

        .contact-item:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .contact-icon {
            background: #e74c3c;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .contact-item:hover .contact-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .contact-item:nth-child(1) .contact-icon {
            background: #e74c3c;
        }

        .contact-item:nth-child(2) .contact-icon {
            background: linear-gradient(135deg, #3498db, #2ecc71);
        }

        .contact-item:nth-child(3) .contact-icon {
            background: #e74c3c;
        }

        .contact-item-content {
            flex: 1;
        }

        .contact-item h3 {
            font-size: 22px;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
        }

        .contact-item p {
            margin: 0;
            color: #666;
            font-size: 16px;
            line-height: 1.5;
        }

        .contact-form {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .contact-form h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        /* ===== ABOUT PAGE ===== */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
            width: 100%;
        }

        .about-img {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            width: 100%;
        }

        .about-img img {
            width: 100%;
            height: auto;
            display: block;
        }

        .about-text h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .about-text p {
            margin-bottom: 15px;
            line-height: 1.7;
            font-size: 17px;
        }

        /* ===== CHECKOUT PAGE ===== */
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 50px;
            margin-top: 30px;
            align-items: start;
        }

        /* ===== CHECKOUT OVERLAY MODAL ===== */
        .checkout-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1001;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .checkout-overlay.active {
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 1;
            animation: fadeInOverlay 0.3s ease;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .checkout-modal {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.1);
            border: none;
            color: var(--dark);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            z-index: 1002;
        }

        .modal-close:hover {
            background: var(--primary);
            color: white;
            transform: rotate(90deg);
        }

        .checkout-form {
            background-color: white;
            padding: 40px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .checkout-form h2 {
            font-size: 28px;
            margin-bottom: 30px;
            color: var(--dark);
            font-weight: 700;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f5;
        }

        .order-summary {
            background-color: white;
            padding: 35px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 120px;

        }

        .order-summary h3 {
            font-size: 26px;
            margin-bottom: 25px;
            color: var(--dark);
            font-weight: 700;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f5;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
            position: relative;
        }

        .order-item:hover {
            background-color: rgba(255, 107, 107, 0.02);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-item-details {
            flex: 1;
            min-width: 0;
            margin-right: 15px;
        }

        .order-item-name {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .order-item-quantity {
            color: #666;
            font-size: 14px;
        }

        .order-item-price {
            font-weight: 600;
            color: var(--primary);
            margin-right: 45px;
            white-space: nowrap;
        }

        .delete-item {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #e74c3c 0%, #ff7979 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
            opacity: 0.7;
        }

        .delete-item:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 16px rgba(231, 76, 60, 0.4);
        }

        .empty-cart-message {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .empty-cart-message i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 24px;
            font-weight: 700;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 3px solid #f1f3f5;
            color: var(--dark);
        }

        .proceed-to-payment-btn {
            width: 100%;
            margin-top: 25px;
            font-size: 18px;
            padding: 18px;
        }

        /* ===== PAYMENT STATES STYLING ===== */
        .payment-state {
            display: none;
            text-align: center;
            margin-top: 40px;
            padding: 50px 40px;
            background-color: white;
            border-radius: var(--border-radius);
            animation: fadeIn 0.6s ease;
            border: 2px solid transparent;
        }

        .payment-state.active {
            display: block;
        }

        .payment-processing {
            border-color: var(--warning);
        }

        .payment-processing h3 {
            color: var(--warning);
            margin-bottom: 25px;
            font-size: 28px;
        }

        .spinner {
            border: 6px solid #f1f3f5;
            border-top: 6px solid var(--warning);
            border-radius: 50%;
            width: 70px;
            height: 70px;
            animation: spin 1.5s linear infinite;
            margin: 0 auto 30px;
            position: relative;
        }

        .spinner:after {
            content: '';
            position: absolute;
            top: -6px;
            left: -6px;
            right: -6px;
            bottom: -6px;
            border: 6px solid transparent;
            border-top: 6px solid rgba(253, 203, 110, 0.3);
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        .payment-pending {
            border-color: #adb5bd;
        }

        .payment-pending h3 {
            color: #6c757d;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .payment-pending .status-icon {
            color: #6c757d;
        }

        .payment-verified-state {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(0, 184, 148, 0.05), rgba(0, 184, 148, 0.02));
        }

        .payment-verified-state h3 {
            color: var(--success);
            margin-bottom: 20px;
            font-size: 28px;
        }

        .payment-verified-state .status-icon {
            color: var(--success);
            animation: pulse 2s infinite;
        }

        .payment-failed-state {
            border-color: var(--danger);
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.05), rgba(231, 76, 60, 0.02));
        }

        .payment-failed-state h3 {
            color: var(--danger);
            margin-bottom: 20px;
            font-size: 28px;
        }

        .delivery-code-state {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.05), rgba(255, 107, 107, 0.02));
            position: relative;
            overflow: hidden;
        }

        .delivery-code-state:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-primary);
        }

        .delivery-code-state h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 32px;
        }

        .delivery-code-display {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 107, 107, 0.05));
            border-radius: var(--border-radius);
            border: 2px dashed var(--primary);
        }

        .delivery-code-label {
            font-size: 18px;
            color: #666;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .delivery-code {
            font-size: 64px;
            font-weight: 800;
            letter-spacing: 15px;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            margin: 20px auto;
            display: inline-block;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.15);
        }

        .status-icon {
            font-size: 80px;
            margin-bottom: 25px;
            display: block;
        }

        .order-confirmation {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--success);
            font-weight: 600;
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
            padding: 0 20px;
        }

        .progress-steps:before {
            content: '';
            position: absolute;
            top: 25px;
            left: 50px;
            right: 50px;
            height: 4px;
            background: #e9ecef;
            z-index: 1;
        }

        .progress-step {
            text-align: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-icon {
            width: 55px;
            height: 55px;
            background: #e9ecef;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin: 0 auto 15px;
            color: #666;
            transition: all 0.3s ease;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .step-icon.active {
            background: var(--gradient-primary);
            color: white;
            transform: scale(1.1);
        }

        .step-icon.completed {
            background: var(--gradient-success);
            color: white;
        }

        .step-label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .step-label.active {
            color: var(--primary);
            font-weight: 600;
        }

        /* Animation Keyframes */
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes confetti {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(500px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Confetti Animation for Success */
        .confetti-container {
            position: relative;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            background: var(--primary);
            opacity: 0;
        }

        /* Item removal animation */
        @keyframes fadeOutSlide {
            0% {
                opacity: 1;
                transform: translateX(0);
            }

            100% {
                opacity: 0;
                transform: translateX(-50px);
            }
        }

        /* ===== ANNOUNCEMENT BANNER ===== */
        .announcement-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-warning);
            color: #2d3436;
            padding: 15px;
            text-align: center;
            z-index: 10000;
            display: none;
            box-shadow: 0 4px 20px rgba(253, 203, 110, 0.4);
            font-weight: 500;
        }

        .announcement-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .announcement-close {
            background: rgba(0, 0, 0, 0.1);
            border: none;
            color: #2d3436;
            font-size: 20px;
            cursor: pointer;
            padding: 5px 15px;
            border-radius: 30px;
            transition: all 0.3s ease;
        }

        .announcement-close:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* ===== FOOTER ===== */
        footer {
            background: var(--secondary);
            color: white;
            padding: 60px 0 30px;
            margin-top: 80px;
            position: relative;
            overflow: hidden;
        }

        footer:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-primary);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 50px;
            margin-bottom: 50px;
        }

        .footer-column h3 {
            font-size: 22px;
            margin-bottom: 25px;
            color: white;
            font-weight: 600;
            position: relative;
            padding-bottom: 15px;
        }

        .footer-column h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #b2bec3;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .social-icons a:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #b2bec3;
            font-size: 15px;
        }

        /* ===== ADMIN PANEL STYLES ===== */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
        }

        .admin-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
            background: #f8f9fa;
            min-height: 100vh;
            position: relative;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            background: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        .admin-title {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Playfair Display', serif;
        }

        .admin-close {
            background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .admin-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 52, 54, 0.3);
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.pending {
            border-top: 5px solid #fdcb6e;
        }

        .stat-card.verified {
            border-top: 5px solid #00b894;
        }

        .stat-card.total {
            border-top: 5px solid #0984e3;
        }

        .stat-card.revenue {
            border-top: 5px solid #ff6b6b;
        }

        .stat-icon {
            font-size: 40px;
            margin-bottom: 15px;
            display: block;
        }

        .stat-card.pending .stat-icon {
            color: #fdcb6e;
        }

        .stat-card.verified .stat-icon {
            color: #00b894;
        }

        .stat-card.total .stat-icon {
            color: #0984e3;
        }

        .stat-card.revenue .stat-icon {
            color: #ff6b6b;
        }

        .stat-number {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 10px;
            color: #2d3436;
        }

        .stat-label {
            color: #636e72;
            font-size: 16px;
            font-weight: 500;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .admin-tab {
            padding: 15px 30px;
            background: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            color: #636e72;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .admin-tab.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
        }

        .admin-tab:hover:not(.active) {
            background: #f1f3f5;
            transform: translateY(-2px);
        }

        .admin-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .admin-content.active {
            display: block;
        }

        .orders-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
        }

        .table-header {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr 1fr 1fr 1fr;
            padding: 20px 30px;
            background: #f8f9fa;
            font-weight: 600;
            color: #2d3436;
            border-bottom: 2px solid #e9ecef;
        }

        .table-row {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr 1fr 1fr 1fr;
            padding: 20px 30px;
            align-items: center;
            border-bottom: 1px solid #e9ecef;
            transition: background 0.3s ease;
        }

        .table-row:hover {
            background: #f8f9fa;
        }

        .table-row.pending {
            background: rgba(253, 203, 110, 0.05);
        }

        .table-row.pending:hover {
            background: rgba(253, 203, 110, 0.1);
        }

        .table-row.verified {
            background: rgba(0, 184, 148, 0.05);
        }

        .table-row.verified:hover {
            background: rgba(0, 184, 148, 0.1);
        }

        .order-id {
            font-weight: 600;
            color: #0984e3;
            font-family: monospace;
            background: rgba(9, 132, 227, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        .order-customer {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .customer-name {
            font-weight: 600;
            color: #2d3436;
        }

        .customer-contact {
            font-size: 14px;
            color: #636e72;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .order-items {
            max-height: 100px;
            overflow-y: auto;
            padding: 5px;
        }

        .order-item-line {
            font-size: 14px;
            color: #636e72;
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
        }

        .order-total {
            font-weight: 600;
            color: #ff6b6b;
            font-size: 18px;
        }

        .payment-method {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .payment-method.card {
            background: rgba(0, 184, 148, 0.1);
            color: #00b894;
        }

        .payment-method.transfer {
            background: rgba(253, 203, 110, 0.1);
            color: #e17055;
        }

        .order-status {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .order-status.pending {
            background: rgba(253, 203, 110, 0.1);
            color: #e17055;
        }

        .order-status.verified {
            background: rgba(0, 184, 148, 0.1);
            color: #00b894;
        }

        .order-status.delivered {
            background: rgba(9, 132, 227, 0.1);
            color: #0984e3;
        }

        .order-time {
            color: #636e72;
            font-size: 14px;
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .btn-action {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-verify {
            background: linear-gradient(135deg, #00b894 0%, #00d8a7 100%);
            color: white;
        }

        .btn-verify:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
        }

        .btn-view {
            background: linear-gradient(135deg, #0984e3 0%, #00cec9 100%);
            color: white;
        }

        .btn-view:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
        }

        .btn-delete {
            background: linear-gradient(135deg, #e74c3c 0%, #ff7979 100%);
            color: white;
        }

        .btn-delete:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        /* Order Details Modal */
        .order-details-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .order-details-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .order-details-content {
            background: white;
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: slideUp 0.4s ease;
        }

        .order-details-header {
            padding: 30px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            border-radius: 20px 20px 0 0;
        }

        .order-details-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .order-details-id {
            font-family: monospace;
            font-size: 18px;
            opacity: 0.9;
        }

        .order-details-body {
            padding: 30px;
        }

        .details-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f3f5;
        }

        .customer-details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detail-label {
            font-size: 14px;
            color: #636e72;
            font-weight: 500;
        }

        .detail-value {
            font-size: 16px;
            color: #2d3436;
            font-weight: 600;
        }

        .payment-proof {
            margin-top: 20px;
            text-align: center;
        }

        .payment-proof img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .payment-proof img:hover {
            transform: scale(1.02);
        }

        .items-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .item-name {
            font-weight: 600;
            color: #2d3436;
        }

        .item-quantity {
            color: #636e72;
            font-size: 14px;
        }

        .item-price {
            font-weight: 600;
            color: #ff6b6b;
        }

        .order-summary-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .order-summary-row.total {
            font-size: 20px;
            font-weight: 800;
            color: #2d3436;
            border-bottom: none;
            padding-top: 20px;
        }

        .order-details-footer {
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e9ecef;
            background: #f8f9fa;
            border-radius: 0 0 20px 20px;
        }

        /* Login Modal */
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .login-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .login-content {
            background: white;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            padding: 50px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: slideUp 0.4s ease;
        }

        .login-title {
            font-size: 32px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Playfair Display', serif;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .login-form .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .login-form .form-group label {
            font-weight: 600;
            color: #2d3436;
        }

        .login-form .form-group input {
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .login-form .form-group input:focus {
            border-color: #ff6b6b;
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .login-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .login-error {
            color: #e74c3c;
            text-align: center;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .login-error.active {
            display: block;
        }

        /* Admin Access Button */
        .admin-access-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .admin-access-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
        }

        /* Image Preview Modal */
        .image-preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 4000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .image-preview-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .image-preview-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .image-preview-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        .preview-close {
            position: absolute;
            top: -50px;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preview-close:hover {
            background: rgba(255, 107, 107, 0.8);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .checkout-container {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .order-summary {
                position: static;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .table-header,
            .table-row {
                grid-template-columns: 1fr 2fr 1fr 1fr 1fr;
            }

            .order-items,
            .order-time {
                display: none;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 25px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }

            .hero h1 {
                font-size: 42px;
            }

            .page-title {
                font-size: 36px;
            }

            .header-right {
                margin-top: 15px;
            }

            .menu-highlight {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }

            .contact-content {
                grid-template-columns: 1fr;
            }

            .about-content {
                grid-template-columns: 1fr;
            }

            .table-header,
            .table-row {
                grid-template-columns: 1fr 1fr 1fr 1fr;
            }

            .order-total,
            .payment-method {
                display: none;
            }

            .customer-details-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 80px 20px;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .menu-highlight {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .checkout-form,
            .order-summary {
                padding: 30px;
            }

            .payment-state {
                padding: 40px 25px;
            }

            .checkout-modal {
                width: 95%;
                max-height: 95vh;
            }

            .order-item {
                flex-wrap: wrap;
            }

            .order-item-details {
                width: 60%;
            }

            .order-item-price {
                width: 30%;
                margin-right: 10%;
            }

            .toast-container {
                top: 120px;
                right: 10px;
                left: 10px;
                max-width: none;
            }

            .admin-container {
                padding: 15px;
            }

            .admin-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .admin-tabs {
                flex-direction: column;
            }

            .admin-tab {
                width: 100%;
                justify-content: center;
            }

            .table-header,
            .table-row {
                grid-template-columns: 1fr 1fr;
                padding: 15px;
            }

            .order-status,
            .order-actions {
                display: none;
            }

            .order-details-content {
                max-height: 95vh;
            }

            .order-details-body {
                padding: 20px;
            }

            .login-content {
                padding: 30px;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 20px;
            }

            .hero h1 {
                font-size: 32px;
            }

            .page-title {
                font-size: 30px;
            }

            .delivery-code {
                font-size: 48px;
                letter-spacing: 10px;
                padding: 15px;
            }

            .btn {
                padding: 14px 30px;
                font-size: 15px;
            }

            .checkout-form {
                padding: 25px 20px;
            }

            nav ul {
                gap: 10px;
            }

            nav a {
                padding: 6px 12px;
                font-size: 14px;
            }

            .order-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .order-item-details {
                width: 100%;
                margin-bottom: 10px;
            }

            .order-item-price {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }

            .delete-item {
                position: relative;
                top: 0;
                transform: none;
                align-self: flex-end;
            }

            .menu-highlight {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .table-header,
            .table-row {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 10px;
            }

            .order-customer {
                align-items: center;
            }

            .order-details-footer {
                flex-direction: column;
                gap: 15px;
            }

            .admin-access-btn {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
    </style>
</head>

<body>
    <!-- Sync Notification -->
    <div class="sync-notification" id="syncNotification">
        <i class="fas fa-sync-alt"></i>
        <div>
            <strong>Order Updated!</strong>
            <div style="font-size: 14px; opacity: 0.9;">Your order status has been updated.</div>
        </div>
    </div>

    <div class="sync-notification" id="syncNotification">
    <i class="fas fa-sync-alt"></i>
    <div>
        <strong>Order Updated!</strong>
        <div style="font-size: 14px; opacity: 0.9;">New order received.</div>
    </div>
</div>

    <!-- Rest of your HTML remains exactly the same -->
    <!-- Toast Container, Announcement Banner, Admin Access Button, etc. -->

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Announcement Banner -->
    <div class="announcement-banner" id="announcementBanner">
        <div class="announcement-content">
            <div id="announcementText"></div>
            <button class="announcement-close" id="announcementClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Admin Access Button (Floating) -->
    <div class="admin-access-btn" id="adminAccessBtn">
        <i class="fas fa-user-shield"></i>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" data-page="home">
                <i class="fas fa-utensils"></i>
                TastyBites
            </a>

            <nav>
                <ul>
                    <li><a href="#" data-page="home" class="active">Home</a></li>
                    <li><a href="#" data-page="menu">Menu</a></li>
                    <li><a href="#" data-page="about">About</a></li>
                    <li><a href="#" data-page="contact">Contact</a></li>
                    <li><a href="#" data-page="checkout">Checkout</a></li>
                </ul>
            </nav>

            <div class="header-right">
                <div class="cart-icon" id="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-container">
            <div class="admin-header">
                <h1 class="admin-title">
                    <i class="fas fa-user-shield"></i> TastyBites Admin Panel
                </h1>
                <button class="admin-close" id="adminClose">
                    <i class="fas fa-times"></i> Close Admin Panel
                </button>
            </div>

            <!-- Admin Stats -->
            <div class="admin-stats">
                <div class="stat-card pending">
                    <i class="fas fa-clock stat-icon"></i>
                    <div class="stat-number" id="pendingCount">0</div>
                    <div class="stat-label">Pending Orders</div>
                </div>
                <div class="stat-card verified">
                    <i class="fas fa-check-circle stat-icon"></i>
                    <div class="stat-number" id="verifiedCount">0</div>
                    <div class="stat-label">Verified Orders</div>
                </div>
                <div class="stat-card total">
                    <i class="fas fa-shopping-cart stat-icon"></i>
                    <div class="stat-number" id="totalOrders">0</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card revenue">
                    <i class="fas fa-dollar-sign stat-icon"></i>
                    <div class="stat-number" id="totalRevenue">0.00</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
            </div>

            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="pending">
                    <i class="fas fa-clock"></i> Pending Orders
                </button>
                <button class="admin-tab" data-tab="verified">
                    <i class="fas fa-check-circle"></i> Verified Orders
                </button>
                <button class="admin-tab" data-tab="all">
                    <i class="fas fa-list"></i> All Orders
                </button>
            </div>

            <!-- Pending Orders Tab -->
            <div class="admin-content active" id="pendingTab">
                <div class="orders-table">
                    <div class="table-header">
                        <div>Order ID</div>
                        <div>Customer</div>
                        <div>Total</div>
                        <div>Payment Method</div>
                        <div>Status</div>
                        <div>Time</div>
                        <div>Actions</div>
                    </div>
                    <div id="pendingOrdersList">
                        <!-- Pending orders will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Verified Orders Tab -->
            <div class="admin-content" id="verifiedTab">
                <div class="orders-table">
                    <div class="table-header">
                        <div>Order ID</div>
                        <div>Customer</div>
                        <div>Total</div>
                        <div>Payment Method</div>
                        <div>Status</div>
                        <div>Time</div>
                        <div>Delivery Code</div>
                    </div>
                    <div id="verifiedOrdersList">
                        <!-- Verified orders will be populated here -->
                    </div>
                </div>
            </div>

            <!-- All Orders Tab -->
            <div class="admin-content" id="allTab">
                <div class="orders-table">
                    <div class="table-header">
                        <div>Order ID</div>
                        <div>Customer</div>
                        <div>Total</div>
                        <div>Payment Method</div>
                        <div>Status</div>
                        <div>Time</div>
                        <div>Actions</div>
                    </div>
                    <div id="allOrdersList">
                        <!-- All orders will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Overlay Modal -->
    <div class="checkout-overlay" id="checkoutOverlay">
        <div class="checkout-modal">
            <button class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>

            <div class="checkout-form">
                <h2>Delivery Information</h2>
                <form id="checkoutForm">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="address">Delivery Address</label>
                        <textarea id="address" class="form-control" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="emailCheckout">Email Address</label>
                        <input type="email" id="emailCheckout" class="form-control" required>
                    </div>

                    <div class="payment-methods">
                        <h2>Payment Method</h2>

                        <div class="payment-option" id="cardOption">
                            <div class="payment-icon">
                                <i class="far fa-credit-card"></i>
                            </div>
                            <div>
                                <h3>Credit/Debit Card</h3>
                                <p>Pay securely with your card</p>
                            </div>
                        </div>

                        <div class="payment-option" id="transferOption">
                            <div class="payment-icon">
                                <i class="fas fa-university"></i>
                            </div>
                            <div>
                                <h3>Bank Transfer</h3>
                                <p>Transfer directly to our account</p>
                            </div>
                        </div>
                    </div>

                    <div id="cardDetails" style="display: none;">
                        <div class="form-group">
                            <label for="cardNumber">Card Number</label>
                            <input type="text" id="cardNumber" class="form-control" placeholder="1234 5678 9012 3456">
                        </div>

                        <div class="form-group">
                            <label for="cardExpiry">Expiry Date</label>
                            <input type="text" id="cardExpiry" class="form-control" placeholder="MM/YY">
                        </div>

                        <div class="form-group">
                            <label for="cardCVC">CVC</label>
                            <input type="text" id="cardCVC" class="form-control" placeholder="123">
                        </div>
                    </div>

                    <div id="bankDetails" style="display: none;">
                        <div class="form-group">
                            <p><strong>Bank Transfer Instructions:</strong></p>
                            <p>Please transfer the total amount to the following account:</p>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                                <p><strong>Bank:</strong> Food Bank</p>
                                <p><strong>Account Name:</strong> TastyBites Restaurant</p>
                                <p><strong>Account Number:</strong> 1234-5678-9012-3456</p>
                                <p><strong>Reference:</strong> Your Order ID</p>
                            </div>
                            <p>Once transferred, please upload proof of payment.</p>
                            <div class="form-group">
                                <label for="transferProof">Upload Proof of Payment (Screenshot/Receipt)</label>
                                <input type="file" id="transferProof" class="form-control" accept="image/*">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn" id="submitOrder">
                        <i class="fas fa-lock"></i> Submit Order for Payment Verification
                    </button>
                </form>

                <!-- Progress Steps -->
                <div class="progress-steps" id="progressSteps" style="display: none;">
                    <div class="progress-step">
                        <div class="step-icon" id="step1">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="step-label">Order Placed</div>
                    </div>
                    <div class="progress-step">
                        <div class="step-icon" id="step2">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="step-label">Payment Processing</div>
                    </div>
                    <div class="progress-step">
                        <div class="step-icon" id="step3">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="step-label">Payment Verified</div>
                    </div>
                    <div class="progress-step">
                        <div class="step-icon" id="step4">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="step-label">Order Confirmed</div>
                    </div>
                </div>

                <!-- Payment Processing State -->
                <div class="payment-state payment-processing" id="paymentProcessing">
                    <div class="spinner"></div>
                    <h3>Processing Your Payment</h3>
                    <p>Please wait while we verify your payment. This may take a moment...</p>
                    <p id="paymentNote" style="color: #666; margin-top: 15px;"></p>
                </div>

                <!-- Payment Pending State -->
                <div class="payment-state payment-pending" id="paymentPending">
                    <div class="status-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Payment Verification Pending</h3>
                    <p>Your order has been received and is awaiting payment verification.</p>
                    <p><strong>Order ID:</strong> <span id="pendingOrderId" style="color: var(--primary); font-weight: 600;"></span></p>
                    <p>We will notify you via email once your payment is verified and your delivery code is generated.</p>
                    <p>For bank transfers, please complete the transfer and upload proof of payment if you haven't already.</p>
                    <div style="margin-top: 30px;">
                        <button class="btn btn-secondary" id="returnHomePending">
                            <i class="fas fa-home"></i> Return to Home
                        </button>
                    </div>
                </div>

                <!-- Payment Verified State (System Verified, Awaiting Admin) -->
                <div class="payment-state payment-verified-state" id="paymentVerified">
                    <div class="status-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>Payment Verified Successfully!</h3>
                    <p>Your payment has been confirmed by our system.</p>
                    <p><strong>Order ID:</strong> <span id="verifiedOrderId" style="color: var(--success); font-weight: 600;"></span></p>
                    <p>Your order is now awaiting final confirmation from our restaurant staff.</p>
                    <p>You will receive your delivery code once the restaurant confirms your order.</p>
                    <div class="spinner" style="margin: 25px auto; border-top-color: var(--success);"></div>
                    <p style="color: #666; font-size: 14px;"><i class="fas fa-info-circle"></i> Waiting for restaurant confirmation...</p>
                </div>

                <!-- Payment Failed State -->
                <div class="payment-state payment-failed-state" id="paymentFailed">
                    <div class="status-icon">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <h3>Payment Verification Failed</h3>
                    <p>We were unable to verify your payment. Please try again or contact customer support.</p>
                    <p><strong>Reason:</strong> <span id="failureReason">Payment not received or verification failed</span></p>
                    <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
                        <button class="btn btn-warning" id="retryPayment">
                            <i class="fas fa-redo"></i> Retry Payment
                        </button>
                        <button class="btn btn-secondary" id="editDetails">
                            <i class="fas fa-edit"></i> Edit Details
                        </button>
                    </div>
                </div>

                <!-- Delivery Code State (Final State - After Admin Verification) -->
                <div class="payment-state delivery-code-state confetti-container" id="deliveryCodeDisplay">
                    <div class="order-confirmation">
                        <i class="fas fa-check-circle"></i> Order Confirmed & Payment Verified!
                    </div>
                    <p style="margin-bottom: 25px;">Your payment has been verified and your order is now being prepared for delivery.</p>

                    <div class="delivery-code-display">
                        <div class="delivery-code-label">Your delivery code is:</div>
                        <div class="delivery-code" id="deliveryCode">1234</div>
                        <div style="color: #666; font-size: 14px; margin-top: 15px;">
                            <i class="fas fa-info-circle"></i> Provide this code to the delivery person
                        </div>
                    </div>

                    <p style="margin: 25px 0;">You will receive a confirmation email with your order details.</p>
                    <p><strong>Order ID:</strong> <span id="successOrderId" style="color: var(--primary); font-weight: 600;"></span></p>

                    <div style="margin-top: 35px;">
                        <button class="btn btn-success" id="returnHomeSuccess">
                            <i class="fas fa-home"></i> Return to Home
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- Menu Management Modal -->
    <div class="menu-form-modal" id="menuFormModal">
        <div class="menu-form-content">
            <div class="menu-form-header">
                <h2 class="menu-form-title" id="menuFormTitle">Add New Menu Item</h2>
                <div id="menuFormSubtitle">Fill in the details below</div>
            </div>
            <div class="menu-form-body">
                <form id="menuItemForm">
                    <input type="hidden" id="menuItemId" value="">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="menuItemName">Item Name</label>
                            <input type="text" id="menuItemName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="menuItemPrice">Price ()</label>
                            <input type="number" id="menuItemPrice" class="form-control" min="0" step="0.01" required>
                        </div>
                    </div>
                    
                    <div class="form-group form-full-width">
                        <label for="menuItemDescription">Description</label>
                        <textarea id="menuItemDescription" class="form-control" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="menuItemImage">Image URL</label>
                            <input type="text" id="menuItemImage" class="form-control" placeholder="https://example.com/image.jpg">
                            <small style="color: #636e72;">Or upload an image below</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="menuItemImageUpload">Upload Image</label>
                            <input type="file" id="menuItemImageUpload" class="form-control" accept="image/*">
                        </div>
                    </div>
                    
                    <div class="form-group form-full-width">
                        <label>Image Preview</label>
                        <div class="image-preview" id="imagePreview">
                            <div class="image-preview-placeholder">
                                <i class="fas fa-image"></i>
                                <p>Image preview will appear here</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group form-full-width">
                        <label class="switch-label">
                            <span>Available for Order</span>
                            <label class="switch">
                                <input type="checkbox" id="menuItemAvailable" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <small style="color: #636e72; display: block; margin-top: 5px;">
                            Toggle off to mark item as "Out of Stock"
                        </small>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelMenuForm">
                            Cancel
                        </button>
                        <button type="submit" class="btn-success">
                            <i class="fas fa-save"></i> Save Item
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="order-details-modal" id="orderDetailsModal">
        <div class="order-details-content">
            <div class="order-details-header">
                <h2 class="order-details-title">Order Details</h2>
                <div class="order-details-id" id="detailOrderId">TB123456789</div>
            </div>
            <div class="order-details-body">
                <div class="details-section">
                    <h3 class="section-title">Customer Information</h3>
                    <div class="customer-details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Full Name:</span>
                            <span class="detail-value" id="detailCustomerName">John Doe</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Phone:</span>
                            <span class="detail-value" id="detailCustomerPhone">+1234567890</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Email:</span>
                            <span class="detail-value" id="detailCustomerEmail">john@example.com</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Address:</span>
                            <span class="detail-value" id="detailCustomerAddress">123 Food Street, Culinary City</span>
                        </div>
                    </div>
                </div>

                <div class="details-section">
                    <h3 class="section-title">Payment Information</h3>
                    <div class="customer-details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Payment Method:</span>
                            <span class="detail-value" id="detailPaymentMethod">Bank Transfer</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Status:</span>
                            <span class="detail-value" id="detailPaymentStatus">Pending</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Order Time:</span>
                            <span class="detail-value" id="detailOrderTime">2023-12-01 14:30:00</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Delivery Code:</span>
                            <span class="detail-value" id="detailDeliveryCode">Not Generated</span>
                        </div>
                    </div>

                    <div class="payment-proof" id="paymentProofSection" style="display: none;">
                        <h4>Payment Proof:</h4>
                        <img src="" alt="Payment Proof" id="paymentProofImage" style="cursor: pointer;">
                        <p style="color: #636e72; margin-top: 10px;">Click image to enlarge</p>
                    </div>
                </div>

                <div class="details-section">
                    <h3 class="section-title">Order Items</h3>
                    <div class="items-list" id="detailItemsList">
                        <!-- Order items will be populated here -->
                    </div>
                    <div class="order-summary-row total">
                        <span>Total Amount:</span>
                        <span id="detailTotalAmount">$0.00</span>
                    </div>
                </div>
            </div>
            <div class="order-details-footer">
                <div id="detailActionButtons">
                    <button class="btn-action btn-verify" id="verifyOrderBtn">
                        <i class="fas fa-check-circle"></i> Verify Payment & Generate Code
                    </button>
                    <button class="btn-action btn-delete" id="rejectOrderBtn">
                        <i class="fas fa-times-circle"></i> Reject Order
                    </button>
                </div>
                <button class="modal-close" id="closeDetailsBtn">
                    <i class="fas fa-times"></i> Close Details
                </button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-content">
            <h1 class="login-title">
                <i class="fas fa-user-shield"></i> Admin Login
            </h1>
            <form class="login-form" id="adminLoginForm">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" placeholder="Enter admin username" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter admin password" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Login to Admin Panel
                </button>
                <div class="login-error" id="loginError">
                    Invalid username or password. Please try again.
                </div>
            </form>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div class="image-preview-modal" id="imagePreviewModal">
        <div class="image-preview-content">
            <img src="" alt="Preview" id="previewImage">
            <button class="preview-close" id="previewClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content container">
        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="hero">
                <h1>Delicious Food Delivered to Your Door</h1>
                <p>Experience the finest cuisine from the comfort of your home. Order online and get your meal delivered fast with our secure delivery system.</p>
                <a href="#" class="btn" data-page="menu">View Our Menu</a>
            </div>

            <h2 class="page-title">Our Specialties</h2>
            <div class="menu-highlight">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </section>

        <!-- Menu Page -->
        <section id="menu" class="page">
            <h2 class="page-title">Our Full Menu</h2>
            <div class="menu-highlight">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </section>

        <!-- About Page -->
        <section id="about" class="page">
            <h2 class="page-title">About TastyBites</h2>
            <div class="about-content">
                <div class="about-img">
                    <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80" alt="Restaurant interior">
                </div>
                <div class="about-text">
                    <h2>Our Story</h2>
                    <p>Founded in 2010, TastyBites started as a small family restaurant with a passion for creating delicious meals using locally sourced ingredients. Over the years, we've grown into a beloved local eatery known for our commitment to quality and flavor.</p>
                    <p>Our chefs combine traditional recipes with modern culinary techniques to create dishes that are both comforting and exciting. We believe that good food brings people together, and we're dedicated to making every meal a memorable experience.</p>
                    <p>Now with our online ordering system, we're bringing our delicious food right to your doorstep, with the same quality and care you'd experience in our restaurant.</p>
                </div>
            </div>
        </section>

        <!-- Contact Page -->
        <section id="contact" class="page">
            <h2 class="page-title">Contact Us</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h2>Get In Touch</h2>
                    <p>We'd love to hear from you. Whether you have questions about our menu, want to provide feedback, or need assistance with an order, our team is here to help.</p>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-item-content">
                            <h3>Address</h3>
                            <p>123 Food Street, Culinary City, CC 10101</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-item-content">
                            <h3>Phone</h3>
                            <p>(123) 456-7890</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-item-content">
                            <h3>Email</h3>
                            <p>info@tastybites.com</p>
                        </div>
                    </div>
                </div>

                <div class="contact-form">
                    <h2>Send us a Message</h2>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Your Name</label>
                            <input type="text" id="name" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Your Email</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" class="form-control" rows="5" required></textarea>
                        </div>

                        <button type="submit" class="btn">Send Message</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Checkout Page -->
        <section id="checkout" class="page">
            <h2 class="page-title">Checkout</h2>

            <div class="checkout-container">
                <div class="order-summary">
                    <h3>Your Order</h3>
                    <div id="orderItems">
                        <!-- Order items will be populated by JavaScript -->
                        <div class="empty-cart-message">
                            <i class="fas fa-shopping-cart"></i>
                            <p>Your cart is empty. Add items from the menu.</p>
                        </div>
                    </div>
                    <div class="order-total">
                        <span>Total:</span>
                        <span id="orderTotal">$0.00</span>
                    </div>
                    <div id="cartActions" style="margin-top: 20px; display: none;">
                        <button class="btn btn-warning" id="clearCart">
                            <i class="fas fa-trash-alt"></i> Clear Cart
                        </button>
                    </div>

                    <button class="btn proceed-to-payment-btn" id="proceedToPayment">
                        <i class="fas fa-credit-card"></i> Proceed to Payment
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>TastyBites</h3>
                    <p style="color: #b2bec3; margin-bottom: 20px;">Delivering delicious meals since 2010. Quality ingredients, authentic flavors, and exceptional service.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-page="home"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#" data-page="menu"><i class="fas fa-chevron-right"></i> Menu</a></li>
                        <li><a href="#" data-page="about"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="#" data-page="contact"><i class="fas fa-chevron-right"></i> Contact</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Food Street, Culinary City</li>
                        <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                        <li><i class="fas fa-envelope"></i> info@tastybites.com</li>
                        <li><i class="fas fa-clock"></i> Mon-Sun: 10am - 11pm</li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p style="color: #b2bec3; margin-bottom: 20px;">Subscribe to get updates on our latest offers!</p>
                    <div style="display: flex; gap: 10px;">
                        <input type="email" placeholder="Your email" style="flex: 1; padding: 12px 15px; border: none; border-radius: 5px; background: rgba(255,255,255,0.1); color: white;">
                        <button class="btn btn-sm" style="padding: 12px 20px;"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2023 TastyBites Restaurant. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ===== DATA MANAGEMENT =====
        let menuItems = JSON.parse(localStorage.getItem('menuItems')) || [
            {
                id: 1,
                name: "Margherita Pizza",
                description: "Classic pizza with tomato sauce, mozzarella, and fresh basil",
                price: 12.99,
                image: "https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 2,
                name: "Grilled Salmon",
                description: "Fresh salmon with lemon butter sauce and seasonal vegetables",
                price: 18.50,
                image: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 3,
                name: "Beef Burger",
                description: "Juicy beef patty with cheese, lettuce, tomato, and special sauce",
                price: 14.75,
                image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1398&q=80",
                available: true
            },
            {
                id: 4,
                name: "Caesar Salad",
                description: "Crisp romaine lettuce with Caesar dressing, croutons, and parmesan",
                price: 9.99,
                image: "https://images.unsplash.com/photo-1546793665-c74683f339c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 5,
                name: "Chicken Tikka Masala",
                description: "Tender chicken in a rich, creamy tomato and spice sauce",
                price: 16.25,
                image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?ixlib=rb-4.0.3&auto=format&fit=crop&w=1371&q=80",
                available: true
            },
            {
                id: 6,
                name: "Chocolate Lava Cake",
                description: "Warm chocolate cake with a molten center, served with vanilla ice cream",
                price: 8.50,
                image: "https://images.unsplash.com/photo-1624353365286-3f8d62dadadf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1376&q=80",
                available: true
            }
        ];

       let announcements = JSON.parse(localStorage.getItem('announcements')) || [
            {
                id: 1,
                text: " Special Offer: Get 20% off on all orders above $30!",
                timestamp: new Date().toISOString(),
                active: true
            },
            {
                id: 2,
                text: " Free delivery on orders above $25 within city limits",
                timestamp: new Date(Date.now() - 86400000).toISOString(),
                active: true
            }
        ];


         let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let orders = [];
            let pendingOrders = [];
 
        let adminCredentials = JSON.parse(localStorage.getItem('adminCredentials')) || {
            username: 'admin',
            password: 'tastybites2023',
            lastLogin: null
        };
        let isAdminLoggedIn = sessionStorage.getItem('adminLoggedIn') === 'true';
        let currentOrderId = sessionStorage.getItem('currentOrderId') || null;
        let currentAdminViewOrderId = null;

        // ===== DOM ELEMENTS =====
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('nav a');
        const cartIcon = document.getElementById('cart-icon');
        const cartCount = document.querySelector('.cart-count');
        const checkoutOverlay = document.getElementById('checkoutOverlay');
        const modalClose = document.getElementById('modalClose');
        const checkoutForm = document.getElementById('checkoutForm');
        const paymentProcessing = document.getElementById('paymentProcessing');
        const paymentPending = document.getElementById('paymentPending');
        const paymentVerified = document.getElementById('paymentVerified');
        const paymentFailed = document.getElementById('paymentFailed');
        const deliveryCodeDisplay = document.getElementById('deliveryCodeDisplay');
        const cardOption = document.getElementById('cardOption');
        const transferOption = document.getElementById('transferOption');
        const cardDetails = document.getElementById('cardDetails');
        const bankDetails = document.getElementById('bankDetails');
        const progressSteps = document.getElementById('progressSteps');
        const clearCartBtn = document.getElementById('clearCart');
        const cartActions = document.getElementById('cartActions');
        const proceedToPaymentBtn = document.getElementById('proceedToPayment');
        const returnHomePending = document.getElementById('returnHomePending');
        const returnHomeSuccess = document.getElementById('returnHomeSuccess');
        const editDetails = document.getElementById('editDetails');
        const retryPayment = document.getElementById('retryPayment');
        const contactForm = document.getElementById('contactForm');
        const toastContainer = document.getElementById('toastContainer');
        const announcementBanner = document.getElementById('announcementBanner');
        const announcementClose = document.getElementById('announcementClose');
        const adminAccessBtn = document.getElementById('adminAccessBtn');
        const adminPanel = document.getElementById('adminPanel');
        const adminClose = document.getElementById('adminClose');
        const loginModal = document.getElementById('loginModal');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const loginError = document.getElementById('loginError');
        const adminTabs = document.querySelectorAll('.admin-tab');
        const adminContents = document.querySelectorAll('.admin-content');
        const orderDetailsModal = document.getElementById('orderDetailsModal');
        const imagePreviewModal = document.getElementById('imagePreviewModal');
        const previewImage = document.getElementById('previewImage');
        const previewClose = document.getElementById('previewClose');
        const closeDetailsBtn = document.getElementById('closeDetailsBtn');
        const verifyOrderBtn = document.getElementById('verifyOrderBtn');
        const rejectOrderBtn = document.getElementById('rejectOrderBtn');

        // ===== REAL-TIME UPDATE SYSTEM =====
        let orderCheckInterval = null;

        function startOrderUpdateChecker() {
            if (orderCheckInterval) clearInterval(orderCheckInterval);
            orderCheckInterval = setInterval(checkForOrderUpdates, 3000);
        }

        function stopOrderUpdateChecker() {
            if (orderCheckInterval) {
                clearInterval(orderCheckInterval);
                orderCheckInterval = null;
            }
        }

        async function checkForOrderUpdates() {
            if (!currentOrderId) return;

            try {
                const allOrders = await window.cloudStorage.getOrders();
                const currentOrder = allOrders.find(order => order.orderId === currentOrderId);
                
                if (currentOrder) {
                    if (currentOrder.paymentVerified && currentOrder.deliveryCode) {
                        // Order has been verified
                        showDeliveryCodeToCustomer(currentOrder);
                        stopOrderUpdateChecker();
                    } else if (currentOrder.status === 'processing') {
                        // Order is being processed
                        showPaymentVerifiedAwaitingAdmin(currentOrderId);
                    }
                }
            } catch (error) {
                console.error('Failed to check for updates:', error);
            }
        }

        // ===== ADMIN PANEL FUNCTIONS =====
        async function updateAdminStats() {
            try {
                const allOrders = await window.cloudStorage.getOrders();
                
                const pendingCount = allOrders.filter(order => 
                    order.status === 'pending' && !order.paymentVerified
                ).length;
                
                const verifiedCount = allOrders.filter(order => 
                    order.status === 'verified' || order.paymentVerified
                ).length;
                
                const totalOrders = allOrders.length;
                
                const totalRevenue = allOrders.reduce((total, order) => {
                    const orderTotal = parseFloat(order.total.replace(/[^0-9.-]+/g, "")) || 0;
                    return total + orderTotal;
                }, 0);

                if (document.getElementById('pendingCount')) {
                    document.getElementById('pendingCount').textContent = pendingCount;
                    document.getElementById('verifiedCount').textContent = verifiedCount;
                    document.getElementById('totalOrders').textContent = totalOrders;
                    document.getElementById('totalRevenue').textContent = `$${totalRevenue.toFixed(2)}`;
                }
            } catch (error) {
                console.error('Failed to update admin stats:', error);
            }
        }

        async function renderPendingOrders() {
            const container = document.getElementById('pendingOrdersList');
            if (!container) return;

            try {
                const allOrders = await window.cloudStorage.getOrders();
                const pendingBankTransferOrders = allOrders.filter(order => 
                    order.status === 'pending' && !order.paymentVerified && order.paymentMethod === 'Bank Transfer'
                );

                if (pendingBankTransferOrders.length === 0) {
                    container.innerHTML = `
                        <div class="table-row" style="text-align: center; padding: 40px;">
                            <div style="grid-column: 1 / -1;">
                                <i class="fas fa-clock" style="font-size: 48px; color: #fdcb6e; margin-bottom: 20px;"></i>
                                <h3 style="color: #636e72;">No Pending Bank Transfer Orders</h3>
                                <p style="color: #b2bec3;">All bank transfer orders have been verified.</p>
                            </div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = '';
                pendingBankTransferOrders.forEach(order => {
                    const orderRow = document.createElement('div');
                    orderRow.className = 'table-row pending';
                    orderRow.innerHTML = `
                        <div>
                            <span class="order-id">${order.orderId}</span>
                        </div>
                        <div class="order-customer">
                            <span class="customer-name">${order.customerName}</span>
                            <span class="customer-contact">
                                <i class="fas fa-phone"></i> ${order.phone}
                            </span>
                        </div>
                        <div class="order-total">${order.total}</div>
                        <div>
                            <span class="payment-method transfer">Bank Transfer</span>
                        </div>
                        <div>
                            <span class="order-status pending">Pending</span>
                        </div>
                        <div class="order-time">${formatTime(order.orderTime)}</div>
                        <div class="order-actions">
                            <button class="btn-action btn-view" onclick="viewOrderDetails('${order.orderId}')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn-action btn-verify" onclick="verifyOrder('${order.orderId}')">
                                <i class="fas fa-check"></i> Verify
                            </button>
                        </div>
                    `;
                    container.appendChild(orderRow);
                });
            } catch (error) {
                console.error('Failed to render pending orders:', error);
                container.innerHTML = `
                    <div class="table-row" style="text-align: center; padding: 40px;">
                        <div style="grid-column: 1 / -1;">
                            <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: #e74c3c; margin-bottom: 20px;"></i>
                            <h3 style="color: #636e72;">Error Loading Orders</h3>
                            <p style="color: #b2bec3;">Please refresh the page.</p>
                        </div>
                    </div>
                `;
            }
        }

        async function renderVerifiedOrders() {
            const container = document.getElementById('verifiedOrdersList');
            if (!container) return;

            try {
                const allOrders = await window.cloudStorage.getOrders();
                const verifiedOrdersList = allOrders.filter(order => 
                    order.status === 'verified' || order.paymentVerified
                );

                if (verifiedOrdersList.length === 0) {
                    container.innerHTML = `
                        <div class="table-row" style="text-align: center; padding: 40px;">
                            <div style="grid-column: 1 / -1;">
                                <i class="fas fa-check-circle" style="font-size: 48px; color: #00b894; margin-bottom: 20px;"></i>
                                <h3 style="color: #636e72;">No Verified Orders Yet</h3>
                                <p style="color: #b2bec3;">Verified orders will appear here.</p>
                            </div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = '';
                verifiedOrdersList.forEach(order => {
                    const orderRow = document.createElement('div');
                    orderRow.className = 'table-row verified';
                    orderRow.innerHTML = `
                        <div>
                            <span class="order-id">${order.orderId}</span>
                        </div>
                        <div class="order-customer">
                            <span class="customer-name">${order.customerName}</span>
                            <span class="customer-contact">
                                <i class="fas fa-phone"></i> ${order.phone}
                            </span>
                        </div>
                        <div class="order-total">${order.total}</div>
                        <div>
                            <span class="payment-method ${order.paymentMethod === 'Card' ? 'card' : 'transfer'}">
                                ${order.paymentMethod}
                            </span>
                        </div>
                        <div>
                            <span class="order-status verified">Verified</span>
                        </div>
                        <div class="order-time">${formatTime(order.orderTime)}</div>
                        <div>
                            <span class="order-id" style="background: rgba(0, 184, 148, 0.1); color: #00b894;">
                                ${order.deliveryCode || 'N/A'}
                            </span>
                        </div>
                    `;
                    container.appendChild(orderRow);
                });
            } catch (error) {
                console.error('Failed to render verified orders:', error);
            }
        }

        async function renderAllOrders() {
            const container = document.getElementById('allOrdersList');
            if (!container) return;

            try {
                const allOrders = await window.cloudStorage.getOrders();
                const sortedOrders = allOrders.sort((a, b) => 
                    new Date(b.orderTime) - new Date(a.orderTime)
                );

                if (sortedOrders.length === 0) {
                    container.innerHTML = `
                        <div class="table-row" style="text-align: center; padding: 40px;">
                            <div style="grid-column: 1 / -1;">
                                <i class="fas fa-shopping-cart" style="font-size: 48px; color: #0984e3; margin-bottom: 20px;"></i>
                                <h3 style="color: #636e72;">No Orders Yet</h3>
                                <p style="color: #b2bec3;">Customer orders will appear here.</p>
                            </div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = '';
                sortedOrders.forEach(order => {
                    const isVerified = order.status === 'verified' || order.paymentVerified;
                    const orderRow = document.createElement('div');
                    orderRow.className = `table-row ${isVerified ? 'verified' : 'pending'}`;
                    orderRow.innerHTML = `
                        <div>
                            <span class="order-id">${order.orderId}</span>
                        </div>
                        <div class="order-customer">
                            <span class="customer-name">${order.customerName}</span>
                            <span class="customer-contact">
                                <i class="fas fa-phone"></i> ${order.phone}
                            </span>
                        </div>
                        <div class="order-total">${order.total}</div>
                        <div>
                            <span class="payment-method ${order.paymentMethod === 'Card' ? 'card' : 'transfer'}">
                                ${order.paymentMethod}
                            </span>
                        </div>
                        <div>
                            <span class="order-status ${isVerified ? 'verified' : 'pending'}">
                                ${isVerified ? 'Verified' : 'Pending'}
                            </span>
                        </div>
                        <div class="order-time">${formatTime(order.orderTime)}</div>
                        <div class="order-actions">
                            <button class="btn-action btn-view" onclick="viewOrderDetails('${order.orderId}')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            ${!isVerified ? `
                                <button class="btn-action btn-delete" onclick="deleteOrder('${order.orderId}')">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            ` : ''}
                        </div>
                    `;
                    container.appendChild(orderRow);
                });
            } catch (error) {
                console.error('Failed to render all orders:', error);
            }
        }

        async function viewOrderDetails(orderId) {
            currentAdminViewOrderId = orderId;
            
            try {
                const allOrders = await window.cloudStorage.getOrders();
                const order = allOrders.find(o => o.orderId === orderId);

                if (!order) {
                    alert('Order not found!');
                    return;
                }

                // Populate order details
                document.getElementById('detailOrderId').textContent = order.orderId;
                document.getElementById('detailCustomerName').textContent = order.customerName;
                document.getElementById('detailCustomerPhone').textContent = order.phone;
                document.getElementById('detailCustomerEmail').textContent = order.email;
                document.getElementById('detailCustomerAddress').textContent = order.address;
                document.getElementById('detailPaymentMethod').textContent = order.paymentMethod;
                document.getElementById('detailPaymentStatus').textContent = order.paymentVerified ? 'Verified' : 'Pending';
                document.getElementById('detailOrderTime').textContent = formatDateTime(order.orderTime);
                document.getElementById('detailDeliveryCode').textContent = order.deliveryCode || 'Not Generated';
                document.getElementById('detailTotalAmount').textContent = order.total;

                // Populate order items
                const itemsList = document.getElementById('detailItemsList');
                itemsList.innerHTML = '';
                if (order.items && order.items.length > 0) {
                    order.items.forEach(item => {
                        const itemTotal = item.price * item.quantity;
                        const itemRow = document.createElement('div');
                        itemRow.className = 'item-row';
                        itemRow.innerHTML = `
                            <div>
                                <div class="item-name">${item.name}</div>
                                <div class="item-quantity">Quantity: ${item.quantity}</div>
                            </div>
                            <div class="item-price">$${itemTotal.toFixed(2)}</div>
                        `;
                        itemsList.appendChild(itemRow);
                    });
                }

                // Show/hide payment proof section
                const paymentProofSection = document.getElementById('paymentProofSection');
                const paymentProofImage = document.getElementById('paymentProofImage');
                
                if (order.paymentProof) {
                    paymentProofSection.style.display = 'block';
                    paymentProofImage.src = order.paymentProof;
                    paymentProofImage.onclick = () => {
                        previewImage.src = order.paymentProof;
                        imagePreviewModal.classList.add('active');
                    };
                } else {
                    paymentProofSection.style.display = 'none';
                }

                // Show/hide action buttons based on order status
                const actionButtons = document.getElementById('detailActionButtons');
                if (order.paymentVerified || order.paymentMethod === 'Card') {
                    actionButtons.style.display = 'none';
                } else {
                    actionButtons.style.display = 'block';
                }

                // Show order details modal
                orderDetailsModal.classList.add('active');
            } catch (error) {
                console.error('Failed to view order details:', error);
                alert('Error loading order details. Please try again.');
            }
        }

        async function verifyOrder(orderId) {
            if (!confirm('Are you sure you want to verify this payment and generate delivery code?')) {
                return;
            }

            // Generate delivery code
            const deliveryCode = Math.floor(1000 + Math.random() * 9000).toString();
            
            // Update in cloud storage
            try {
                const success = await window.cloudStorage.updateOrderStatus(
                    orderId, 
                    'verified', 
                    deliveryCode
                );
                
                if (success) {
                    // Update UI
                    await updateAdminPanel();
                    
                    // Close details modal if open
                    orderDetailsModal.classList.remove('active');
                    
                    // Show success message
                    showToast('success', 'Order Verified', `Delivery code generated: ${deliveryCode}`);
                    
                    // Show sync notification
                    window.cloudStorage.showSyncNotification();
                    
                    // Update customer's view if they're still on the checkout page
                    if (window.updateCustomerDeliveryCode) {
                        const allOrders = await window.cloudStorage.getOrders();
                        const order = allOrders.find(o => o.orderId === orderId);
                        if (order) {
                            window.updateCustomerDeliveryCode(order, deliveryCode);
                        }
                    }
                } else {
                    showToast('error', 'Error', 'Failed to verify order. Please try again.');
                }
            } catch (error) {
                console.error('Failed to verify order:', error);
                showToast('error', 'Error', 'Failed to verify order. Please try again.');
            }
        }

        async function deleteOrder(orderId) {
            if (!confirm('Are you sure you want to delete this order? This action cannot be undone.')) {
                return;
            }

            try {
                // Delete from cloud storage
                const success = await window.cloudStorage.deleteOrder(orderId);
                
                if (success) {
                    // Update UI
                    await updateAdminPanel();
                    
                    // Close details modal if open
                    orderDetailsModal.classList.remove('active');
                    
                    // Show success message
                    showToast('success', 'Order Deleted', 'Order has been deleted successfully!');
                } else {
                    showToast('error', 'Error', 'Failed to delete order. Please try again.');
                }
            } catch (error) {
                console.error('Failed to delete order:', error);
                showToast('error', 'Error', 'Failed to delete order. Please try again.');
            }
        }

        async function rejectOrder() {
            if (!currentAdminViewOrderId) return;
            
            if (confirm('Are you sure you want to reject this order? This will delete the order.')) {
                await deleteOrder(currentAdminViewOrderId);
            }
        }

        // ===== CLOUD STORAGE INTEGRATION FUNCTIONS =====
        async function processOrderSubmission(orderData, paymentMethod) {
            // Set order status
            orderData.status = paymentMethod === 'Card' ? 'verified' : 'pending';
            orderData.paymentMethod = paymentMethod;
            
            // Generate order ID if not exists
            if (!orderData.orderId) {
                orderData.orderId = 'TB' + Date.now() + Math.floor(Math.random() * 1000);
            }
            
            // For card payments, generate delivery code immediately
            if (paymentMethod === 'Card') {
                const deliveryCode = Math.floor(1000 + Math.random() * 9000).toString();
                orderData.deliveryCode = deliveryCode;
                orderData.paymentVerified = true;
            }
            
            // Save to cloud storage
            try {
                await window.cloudStorage.saveOrder(orderData);
                console.log('Order saved to cloud:', orderData.orderId);
            } catch (error) {
                console.error('Failed to save order:', error);
                showToast('error', 'Storage Error', 'Failed to save order. Please try again.');
                return;
            }
            
            // Show appropriate state
            if (paymentMethod === 'Card') {
                showPaymentState(paymentProcessing);
                updateProgressSteps(1);
                
                setTimeout(() => {
                    // Show delivery code for card payments
                    showDeliveryCodeToCustomer(orderData);
                    
                    // Update admin panel
                    updateAdminPanel();
                }, 3000);
            } else {
                // For bank transfers
                showPaymentState(paymentPending);
                updateProgressSteps(1);
                
                document.getElementById('pendingOrderId').textContent = orderData.orderId;
                currentOrderId = orderData.orderId;
                sessionStorage.setItem('currentOrderId', orderData.orderId);
                
                // Start checking for updates
                startOrderUpdateChecker();
                
                // Update admin panel
                updateAdminPanel();
            }
            
            // Clear cart
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderOrderSummary();
        }

        async function updateAdminPanel() {
            if (isAdminLoggedIn) {
                await updateAdminStats();
                await renderPendingOrders();
                await renderVerifiedOrders();
                await renderAllOrders();
            }
        }

        async function loadOrderData() {
            try {
                const allOrders = await window.cloudStorage.getOrders();
                
                // Split into pending and verified orders for backward compatibility
                pendingOrders = allOrders.filter(order => 
                    order.status === 'pending' && !order.paymentVerified
                );
                
                orders = allOrders.filter(order => 
                    order.status === 'verified' || order.paymentVerified
                );
                
                console.log('Orders loaded:', allOrders.length);
                console.log('Pending:', pendingOrders.length);
                console.log('Verified:', orders.length);
            } catch (error) {
                console.error('Failed to load orders:', error);
            }
        }

        // Start auto-refresh for admin panel
        function startAutoRefresh() {
            if (isAdminLoggedIn) {
                setInterval(async () => {
                    await updateAdminPanel();
                    console.log('Admin panel auto-refreshed');
                }, 5000); // Refresh every 5 seconds
            }
        }

        // ===== MENU MANAGEMENT FUNCTIONS =====
        function renderMenuManagement() {
            const container = document.getElementById('menuManagementTab');
            if (!container) return;
            
            container.innerHTML = `
                <div class="announcement-management">
                    <h3 style="color: #2d3436; margin-bottom: 25px; font-size: 24px;">
                        <i class="fas fa-bullhorn"></i> Announcements
                    </h3>
                    
                    <form class="announcement-form" id="announcementForm">
                        <div class="form-group">
                            <label for="announcementText">New Announcement</label>
                            <textarea id="announcementText" class="form-control" rows="3" 
                                      placeholder="Enter announcement text (e.g., Special offers, updates, etc.)" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-warning" style="align-self: flex-start;">
                            <i class="fas fa-paper-plane"></i> Post Announcement
                        </button>
                    </form>
                    
                    <div class="announcement-preview">
                        <h4>Live Preview:</h4>
                        <div class="announcement-preview-content" id="announcementPreview">
                            No announcement yet
                        </div>
                    </div>
                    
                    <div class="announcement-list" id="announcementList">
                        <!-- Announcements will be populated here -->
                    </div>
                </div>
                
                <h3 style="color: #2d3436; margin: 40px 0 25px; font-size: 24px;">
                    <i class="fas fa-utensils"></i> Menu Items
                </h3>
                
                <div class="menu-management-grid" id="menuItemsGrid">
                    <!-- Menu items will be populated here -->
                </div>
                
                <div class="menu-management-grid">
                    <div class="add-item-btn" id="addMenuItemBtn">
                        <i class="fas fa-plus-circle"></i>
                        <h3>Add New Item</h3>
                        <p>Click to add a new item to the menu</p>
                    </div>
                </div>
            `;
            
            // Render menu items
            renderMenuItemsGrid();
            
            // Render announcements
            renderAnnouncementsList();
            
            // Setup event listeners for menu management
            setupMenuManagementEvents();
        }

        function renderMenuItemsGrid() {
            const container = document.getElementById('menuItemsGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            menuItems.forEach(item => {
                const menuItemCard = document.createElement('div');
                menuItemCard.className = `menu-item-card ${item.available ? '' : 'out-of-stock'}`;
                menuItemCard.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="menu-item-image">
                    <div class="menu-item-content">
                        <div class="menu-item-header">
                            <h4 class="menu-item-name">${item.name}</h4>
                            <div class="menu-item-price">$${item.price.toFixed(2)}</div>
                        </div>
                        <p class="menu-item-description">${item.description}</p>
                        <div class="menu-item-actions">
                            <button class="btn-action btn-edit-menu" onclick="editMenuItem(${item.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn-action btn-toggle-stock" onclick="toggleMenuItemStock(${item.id})">
                                <i class="fas fa-toggle-${item.available ? 'on' : 'off'}"></i> 
                                ${item.available ? 'In Stock' : 'Out of Stock'}
                            </button>
                            <button class="btn-action btn-delete-menu" onclick="deleteMenuItem(${item.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(menuItemCard);
            });
        }

        function renderAnnouncementsList() {
            const container = document.getElementById('announcementList');
            const preview = document.getElementById('announcementPreview');
            
            if (!container || !preview) return;
            
            // Update preview with the latest active announcement
            const activeAnnouncements = announcements.filter(a => a.active);
            if (activeAnnouncements.length > 0) {
                const latest = activeAnnouncements[activeAnnouncements.length - 1];
                preview.textContent = latest.text;
            } else {
                preview.textContent = 'No active announcements';
            }
            
            // Render announcement list
            container.innerHTML = '';
            
            if (announcements.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #636e72;">
                        <i class="fas fa-bullhorn" style="font-size: 48px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <p>No announcements yet. Add your first announcement above.</p>
                    </div>
                `;
                return;
            }
            
            announcements.forEach(announcement => {
                const announcementItem = document.createElement('div');
                announcementItem.className = 'announcement-item';
                announcementItem.innerHTML = `
                    <div class="announcement-item-content">
                        <div class="announcement-item-text">${announcement.text}</div>
                        <div class="announcement-item-time">
                            ${formatDateTime(announcement.timestamp)}
                            ${announcement.active ? '   Active' : '   Inactive'}
                        </div>
                    </div>
                    <div class="announcement-item-actions">
                        <button class="btn-remove-announcement" onclick="toggleAnnouncementStatus(${announcement.id})" 
                                title="${announcement.active ? 'Deactivate' : 'Activate'}">
                            <i class="fas fa-toggle-${announcement.active ? 'on' : 'off'}"></i>
                        </button>
                        <button class="btn-remove-announcement" onclick="deleteAnnouncement(${announcement.id})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                container.appendChild(announcementItem);
            });
        }

        function setupMenuManagementEvents() {
            // Add menu item button
            const addMenuItemBtn = document.getElementById('addMenuItemBtn');
            if (addMenuItemBtn) {
                addMenuItemBtn.addEventListener('click', () => openMenuForm());
            }
            
            // Announcement form
            const announcementForm = document.getElementById('announcementForm');
            const announcementText = document.getElementById('announcementText');
            
            if (announcementForm && announcementText) {
                // Preview announcement as user types
                announcementText.addEventListener('input', function() {
                    const preview = document.getElementById('announcementPreview');
                    if (preview) {
                        preview.textContent = this.value || 'No announcement yet';
                    }
                });
                
                // Submit announcement form
                announcementForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const text = announcementText.value.trim();
                    if (!text) {
                        showToast('error', 'Empty Announcement', 'Please enter announcement text.');
                        return;
                    }
                    
                    const newAnnouncement = {
                        id: Date.now(),
                        text: text,
                        timestamp: new Date().toISOString(),
                        active: true
                    };
                    
                    // Add to announcements array
                    announcements.unshift(newAnnouncement);
                    
                    // Save to localStorage
                    localStorage.setItem('announcements', JSON.stringify(announcements));
                    
                    // Update website announcement banner
                    updateWebsiteAnnouncement();
                    
                    // Reset form
                    announcementText.value = '';
                    
                    // Update UI
                    renderAnnouncementsList();
                    
                    // Show success message
                    showToast('success', 'Announcement Posted', 'Your announcement is now live on the website!');
                });
            }
            
            // Menu item form
            const menuItemForm = document.getElementById('menuItemForm');
            const menuItemImage = document.getElementById('menuItemImage');
            const menuItemImageUpload = document.getElementById('menuItemImageUpload');
            const imagePreview = document.getElementById('imagePreview');
            
            if (menuItemForm) {
                // Image URL change
                if (menuItemImage) {
                    menuItemImage.addEventListener('input', function() {
                        updateImagePreview(this.value);
                    });
                }
                
                // Image upload
                if (menuItemImageUpload) {
                    menuItemImageUpload.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                updateImagePreview(e.target.result);
                                // Also update the URL field
                                if (menuItemImage) {
                                    menuItemImage.value = e.target.result;
                                }
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                }
                
                // Form submission
                menuItemForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const id = parseInt(document.getElementById('menuItemId').value);
                    const name = document.getElementById('menuItemName').value.trim();
                    const price = parseFloat(document.getElementById('menuItemPrice').value);
                    const description = document.getElementById('menuItemDescription').value.trim();
                    const image = document.getElementById('menuItemImage').value.trim();
                    const available = document.getElementById('menuItemAvailable').checked;
                    
                    if (!name || !price || !description) {
                        showToast('error', 'Missing Information', 'Please fill in all required fields.');
                        return;
                    }
                    
                    if (id) {
                        // Update existing item
                        const index = menuItems.findIndex(item => item.id === id);
                        if (index !== -1) {
                            menuItems[index] = {
                                id: id,
                                name: name,
                                description: description,
                                price: price,
                                image: image || menuItems[index].image,
                                available: available
                            };
                            
                            showToast('success', 'Menu Item Updated', `${name} has been updated successfully.`);
                        }
                    } else {
                        // Add new item
                        const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                        const newItem = {
                            id: newId,
                            name: name,
                            description: description,
                            price: price,
                            image: image || 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80',
                            available: available
                        };
                        
                        menuItems.push(newItem);
                        showToast('success', 'Menu Item Added', `${name} has been added to the menu.`);
                    }
                    
                    // Save to localStorage
                    localStorage.setItem('menuItems', JSON.stringify(menuItems));
                    
                    // Close form
                    closeMenuForm();
                    
                    // Update UI
                    renderMenuItemsGrid();
                    updateCustomerMenu();
                });
            }
            
            // Cancel menu form button
            const cancelMenuForm = document.getElementById('cancelMenuForm');
            if (cancelMenuForm) {
                cancelMenuForm.addEventListener('click', closeMenuForm);
            }
        }

        function openMenuForm(itemId = null) {
            const formModal = document.getElementById('menuFormModal');
            const formTitle = document.getElementById('menuFormTitle');
            const formSubtitle = document.getElementById('menuFormSubtitle');
            const form = document.getElementById('menuItemForm');
            
            if (!formModal || !formTitle || !formSubtitle || !form) return;
            
            if (itemId) {
                // Edit existing item
                const item = menuItems.find(item => item.id === itemId);
                if (item) {
                    formTitle.textContent = 'Edit Menu Item';
                    formSubtitle.textContent = 'Update the details below';
                    
                    document.getElementById('menuItemId').value = item.id;
                    document.getElementById('menuItemName').value = item.name;
                    document.getElementById('menuItemPrice').value = item.price;
                    document.getElementById('menuItemDescription').value = item.description;
                    document.getElementById('menuItemImage').value = item.image;
                    document.getElementById('menuItemAvailable').checked = item.available;
                    
                    updateImagePreview(item.image);
                }
            } else {
                // Add new item
                formTitle.textContent = 'Add New Menu Item';
                formSubtitle.textContent = 'Fill in the details below';
                
                form.reset();
                document.getElementById('menuItemId').value = '';
                updateImagePreview('');
            }
            
            formModal.classList.add('active');
        }

        function closeMenuForm() {
            const formModal = document.getElementById('menuFormModal');
            if (formModal) {
                formModal.classList.remove('active');
            }
        }

        function updateImagePreview(imageUrl) {
            const preview = document.getElementById('imagePreview');
            if (!preview) return;
            
            if (imageUrl && (imageUrl.startsWith('http') || imageUrl.startsWith('data:'))) {
                preview.innerHTML = `<img src="${imageUrl}" alt="Preview">`;
            } else {
                preview.innerHTML = `
                    <div class="image-preview-placeholder">
                        <i class="fas fa-image"></i>
                        <p>Image preview will appear here</p>
                    </div>
                `;
            }
        }

        function editMenuItem(itemId) {
            openMenuForm(itemId);
        }

        function toggleMenuItemStock(itemId) {
            const item = menuItems.find(item => item.id === itemId);
            if (!item) return;
            
            item.available = !item.available;
            localStorage.setItem('menuItems', JSON.stringify(menuItems));
            
            // Update UI
            renderMenuItemsGrid();
            updateCustomerMenu();
            
            // Show notification
            showToast('success', 'Stock Updated', 
                `${item.name} is now ${item.available ? 'available' : 'out of stock'}.`);
        }

        function deleteMenuItem(itemId) {
            if (!confirm('Are you sure you want to delete this menu item? This action cannot be undone.')) {
                return;
            }
            
            const item = menuItems.find(item => item.id === itemId);
            if (!item) return;
            
            // Remove from menu
            menuItems = menuItems.filter(item => item.id !== itemId);
            localStorage.setItem('menuItems', JSON.stringify(menuItems));
            
            // Update UI
            renderMenuItemsGrid();
            updateCustomerMenu();
            
            // Show notification
            showToast('success', 'Menu Item Deleted', `${item.name} has been removed from the menu.`);
        }

        function toggleAnnouncementStatus(announcementId) {
            const announcement = announcements.find(a => a.id === announcementId);
            if (!announcement) return;
            
            announcement.active = !announcement.active;
            localStorage.setItem('announcements', JSON.stringify(announcements));
            
            // Update website announcement banner
            updateWebsiteAnnouncement();
            
            // Update UI
            renderAnnouncementsList();
            
            // Show notification
            showToast('success', 'Announcement Updated', 
                `Announcement ${announcement.active ? 'activated' : 'deactivated'}.`);
        }

        function deleteAnnouncement(announcementId) {
            if (!confirm('Are you sure you want to delete this announcement?')) {
                return;
            }
            
            const announcement = announcements.find(a => a.id === announcementId);
            if (!announcement) return;
            
            // Remove announcement
            announcements = announcements.filter(a => a.id !== announcementId);
            localStorage.setItem('announcements', JSON.stringify(announcements));
            
            // Update website announcement banner
            updateWebsiteAnnouncement();
            
            // Update UI
            renderAnnouncementsList();
            
            // Show notification
            showToast('success', 'Announcement Deleted', 'Announcement has been removed.');
        }

        function updateWebsiteAnnouncement() {
            const announcementBanner = document.getElementById('announcementBanner');
            const announcementText = document.getElementById('announcementText');
            
            if (!announcementBanner || !announcementText) return;
            
            // Find the latest active announcement
            const activeAnnouncements = announcements.filter(a => a.active);
            if (activeAnnouncements.length > 0) {
                const latest = activeAnnouncements[activeAnnouncements.length - 1];
                announcementText.textContent = latest.text;
                announcementBanner.style.display = 'block';
            } else {
                announcementBanner.style.display = 'none';
            }
        }

        function updateCustomerMenu() {
            // This function updates the customer-facing menu on the website
            // Check if we're on home or menu page and update if needed
            const homePage = document.getElementById('home');
            const menuPage = document.getElementById('menu');
            
            if (homePage && homePage.classList.contains('active')) {
                const homeMenuContainer = homePage.querySelector('.menu-highlight');
                if (homeMenuContainer) {
                    renderMenuItems(homeMenuContainer);
                }
            }
            
            if (menuPage && menuPage.classList.contains('active')) {
                const menuPageContainer = menuPage.querySelector('.menu-highlight');
                if (menuPageContainer) {
                    renderMenuItems(menuPageContainer);
                }
            }
        }

        // ===== WEBSITE FUNCTIONS =====
        function openCheckoutOverlay() {
            if (cart.length === 0) {
                alert('Your cart is empty. Please add items before proceeding to payment.');
                return;
            }

            checkoutOverlay.classList.add('active');

            // Reset form state
            hideAllPaymentStates();
            checkoutForm.style.display = 'block';
            progressSteps.style.display = 'none';

            // Clear any previous form data
            document.getElementById('fullName').value = '';
            document.getElementById('address').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('emailCheckout').value = '';
            cardOption.classList.remove('selected');
            transferOption.classList.remove('selected');
            cardDetails.style.display = 'none';
            bankDetails.style.display = 'none';
        }

        function closeCheckoutOverlay() {
            checkoutOverlay.classList.remove('active');
        }

        function hideAllPaymentStates() {
            checkoutForm.style.display = 'none';
            paymentProcessing.style.display = 'none';
            paymentPending.style.display = 'none';
            paymentVerified.style.display = 'none';
            paymentFailed.style.display = 'none';
            deliveryCodeDisplay.style.display = 'none';
            progressSteps.style.display = 'none';
        }

        function showPaymentState(state) {
            hideAllPaymentStates();
            state.style.display = 'block';
        }

        function updateProgressSteps(step) {
            const steps = ['step1', 'step2', 'step3', 'step4'];
            steps.forEach((s, index) => {
                const stepEl = document.getElementById(s);
                stepEl.classList.remove('active', 'completed');
                if (index < step) {
                    stepEl.classList.add('completed');
                } else if (index === step) {
                    stepEl.classList.add('active');
                }
            });
            progressSteps.style.display = 'flex';
        }

        function showDeliveryCodeToCustomer(order) {
            hideAllPaymentStates();
            deliveryCodeDisplay.style.display = 'block';
            progressSteps.style.display = 'flex';
            updateProgressSteps(4);

            document.getElementById('deliveryCode').textContent = order.deliveryCode;
            document.getElementById('successOrderId').textContent = order.orderId;

            // Add confetti effect
            createConfetti();

            showNotification(`Your order has been confirmed! Delivery code: ${order.deliveryCode}`);
        }

        function showPaymentVerifiedAwaitingAdmin(orderId) {
            hideAllPaymentStates();
            paymentVerified.style.display = 'block';
            progressSteps.style.display = 'flex';
            updateProgressSteps(2);

            document.getElementById('verifiedOrderId').textContent = orderId;
        }

        // Toast notification function
        function showToast(type, title, message, duration = 5000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            // Set icon based on type
            let iconClass = 'fas fa-info-circle';
            if (type === 'success') iconClass = 'fas fa-check-circle';
            else if (type === 'warning') iconClass = 'fas fa-exclamation-triangle';
            else if (type === 'error') iconClass = 'fas fa-times-circle';

            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="${iconClass}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
                <div class="toast-progress"></div>
            `;

            toastContainer.appendChild(toast);

            // Show toast with animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            // Close button functionality
            const closeBtn = toast.querySelector('.toast-close');
            closeBtn.addEventListener('click', () => {
                hideToast(toast);
            });

            // Auto-remove after duration
            if (duration > 0) {
                setTimeout(() => {
                    hideToast(toast);
                }, duration);
            }

            return toast;
        }

        function hideToast(toast) {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 25px;
                background: var(--gradient-success);
                color: white;
                padding: 18px 25px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0, 184, 148, 0.3);
                z-index: 10001;
                animation: slideIn 0.5s ease-out;
                max-width: 350px;
                display: flex;
                align-items: center;
                gap: 15px;
            `;

            notification.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 24px;"></i>
                <div>
                    <strong style="display: block; margin-bottom: 5px;">Order Verified!</strong>
                    <div style="font-size: 14px; opacity: 0.9;">${message}</div>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.5s ease-out';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }

        function createConfetti() {
            const container = document.querySelector('.confetti-container');
            const colors = ['#ff6b6b', '#00b894', '#0984e3', '#fdcb6e', '#a29bfe'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.animation = `confetti ${Math.random() * 3 + 2}s ease-out forwards`;
                confetti.style.animationDelay = Math.random() * 1 + 's';
                container.appendChild(confetti);

                setTimeout(() => confetti.remove(), 5000);
            }
        }

        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex(item => item.id === itemId);

            if (itemIndex !== -1) {
                // Animate removal
                const itemElement = document.querySelector(`[data-item-id="${itemId}"]`);
                if (itemElement) {
                    itemElement.style.animation = 'fadeOutSlide 0.3s ease-out';

                    setTimeout(() => {
                        // Remove from cart array
                        cart.splice(itemIndex, 1);

                        // Save to localStorage
                        localStorage.setItem('cart', JSON.stringify(cart));

                        // Update UI
                        updateCartCount();
                        renderOrderSummary();

                        // Show notification
                        showCartNotification('Item removed from cart');
                    }, 300);
                }
            }
        }

        function clearCart() {
            if (cart.length === 0) return;

            if (confirm('Are you sure you want to clear your cart?')) {
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderOrderSummary();
                showCartNotification('Cart cleared');
            }
        }

        function showCartNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 25px;
                background: linear-gradient(135deg, #e74c3c 0%, #ff7979 100%);
                color: white;
                padding: 18px 25px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3);
                z-index: 10001;
                animation: slideIn 0.5s ease-out;
                max-width: 350px;
                display: flex;
                align-items: center;
                gap: 15px;
            `;

            notification.innerHTML = `
                <i class="fas fa-trash-alt" style="font-size: 24px;"></i>
                <div>
                    <strong style="display: block; margin-bottom: 5px;">Cart Updated</strong>
                    <div style="font-size: 14px; opacity: 0.9;">${message}</div>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.5s ease-out';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = count;
        }

        function renderMenuItems(container) {
            if (!container) return;

            container.innerHTML = '';

            // Filter to show only available items
            const availableItems = menuItems.filter(item => item.available);

            if (availableItems.length === 0) {
                container.innerHTML = '<p class="empty-state" style="grid-column: 1 / -1; text-align: center; padding: 40px;">No menu items available at the moment. Please check back later.</p>';
                return;
            }

            availableItems.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="menu-item-price">
                            <span class="price">$${item.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${item.id}">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;

                container.appendChild(menuItem);
            });

            // Add event listeners to add-to-cart buttons
            container.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function () {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    addToCart(itemId);
                });
            });
        }

        function renderOrderSummary() {
            const orderItems = document.getElementById('orderItems');
            let total = 0;

            if (cart.length === 0) {
                orderItems.innerHTML = `
                    <div class="empty-cart-message">
                        <i class="fas fa-shopping-cart"></i>
                        <p>Your cart is empty. Add items from the menu.</p>
                    </div>
                `;
                cartActions.style.display = 'none';
                proceedToPaymentBtn.style.display = 'none';
            } else {
                orderItems.innerHTML = '';
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const orderItem = document.createElement('div');
                    orderItem.className = 'order-item';
                    orderItem.setAttribute('data-item-id', item.id);
                    orderItem.innerHTML = `
                        <div class="order-item-details">
                            <div class="order-item-name">${item.name}</div>
                            <div class="order-item-quantity">Qty: ${item.quantity}</div>
                        </div>
                        <div class="order-item-price">$${itemTotal.toFixed(2)}</div>
                        <button class="delete-item" onclick="removeFromCart(${item.id})" title="Remove item">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    orderItems.appendChild(orderItem);
                });
                cartActions.style.display = 'block';
                proceedToPaymentBtn.style.display = 'block';
            }

            document.getElementById('orderTotal').textContent = `$${total.toFixed(2)}`;
        }

        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);

            // Check if item is available
            if (!item.available) {
                showToast('error', 'Item Unavailable', 'Sorry, this item is currently unavailable.');
                return;
            }

            const existingItem = cart.find(i => i.id === itemId);

            if (existingItem) {
                existingItem.quantity += 1;
                showToast('success', 'Cart Updated', `${item.name} quantity increased to ${existingItem.quantity}`);
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1
                });
                showToast('success', 'Added to Cart', `${item.name} has been added to your cart!`);
            }

            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));

            // Update cart count
            updateCartCount();

            // Animate cart icon
            animateCartIcon();
        }

        function animateCartIcon() {
            const cartIconElement = document.querySelector('.cart-icon');
            cartIconElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                cartIconElement.style.transform = 'scale(1)';
            }, 300);
        }

        // ===== HELPER FUNCTIONS =====
        function formatTime(isoString) {
            const date = new Date(isoString);
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function formatDateTime(isoString) {
            const date = new Date(isoString);
            return date.toLocaleString();
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function checkOrderInProgress() {
            if (currentOrderId) {
                // This function is now handled by checkForOrderUpdates which uses cloud storage
                return;
            }
        }

        // ===== GLOBAL FUNCTIONS =====
        window.removeFromCart = removeFromCart;
        window.viewOrderDetails = viewOrderDetails;
        window.verifyOrder = verifyOrder;
        window.deleteOrder = deleteOrder;
        window.editMenuItem = editMenuItem;
        window.toggleMenuItemStock = toggleMenuItemStock;
        window.deleteMenuItem = deleteMenuItem;
        window.toggleAnnouncementStatus = toggleAnnouncementStatus;
        window.deleteAnnouncement = deleteAnnouncement;

        window.updateCustomerDeliveryCode = function(order, deliveryCode) {
            // This function is called when admin verifies an order
            // It updates the customer's view if they're still on the checkout page
            if (currentOrderId === order.orderId) {
                showDeliveryCodeToCustomer(order);
                stopOrderUpdateChecker();
            }
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', async function() {
            // Initialize cloud storage
            if (window.cloudStorage) {
                await window.cloudStorage.init();
            }

            // Initialize admin credentials if not exists
            if (!localStorage.getItem('adminCredentials')) {
                localStorage.setItem('adminCredentials', JSON.stringify(adminCredentials));
            }

            // Initialize menu items if not exists
            if (!localStorage.getItem('menuItems')) {
                localStorage.setItem('menuItems', JSON.stringify(menuItems));
            }

            // Initialize announcements if not exists
            if (!localStorage.getItem('announcements')) {
                localStorage.setItem('announcements', JSON.stringify(announcements));
            }

            // Load initial data
            updateCartCount();
            renderOrderSummary();
            checkOrderInProgress();
            
            // Load order data from cloud storage
            await loadOrderData();
            
            // Update admin panel if logged in
            if (isAdminLoggedIn) {
                await updateAdminPanel();
            }

            // Initialize website announcement banner
            updateWebsiteAnnouncement();

            if (currentOrderId) {
                startOrderUpdateChecker();
            }

            // ===== ENHANCED ADMIN TABS =====
            // Add menu management tab to admin panel
            const adminTabsContainer = document.querySelector('.admin-tabs');
            if (adminTabsContainer) {
                // Add Menu Management tab
                const menuTab = document.createElement('button');
                menuTab.className = 'admin-tab';
                menuTab.setAttribute('data-tab', 'menuManagement');
                menuTab.innerHTML = '<i class="fas fa-utensils"></i> Menu & Announcements';
                adminTabsContainer.appendChild(menuTab);
                
                // Add Menu Management content area
                const adminContainer = document.querySelector('.admin-container');
                if (adminContainer) {
                    const menuManagementTab = document.createElement('div');
                    menuManagementTab.className = 'admin-content';
                    menuManagementTab.id = 'menuManagementTab';
                    adminContainer.appendChild(menuManagementTab);
                }
                
                // Update tab switching logic to include menu management
                const allAdminTabs = document.querySelectorAll('.admin-tab');
                const allAdminContents = document.querySelectorAll('.admin-content');
                
                allAdminTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const tabId = this.getAttribute('data-tab');
                        
                        // Update active tab
                        allAdminTabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        
                        // Show corresponding content
                        allAdminContents.forEach(content => {
                            content.classList.remove('active');
                            if (content.id === `${tabId}Tab`) {
                                content.classList.add('active');
                                
                                // Load specific content for each tab
                                if (tabId === 'menuManagement') {
                                    renderMenuManagement();
                                } else if (tabId === 'pending') {
                                    renderPendingOrders();
                                } else if (tabId === 'verified') {
                                    renderVerifiedOrders();
                                } else if (tabId === 'all') {
                                    renderAllOrders();
                                }
                            }
                        });
                    });
                });
            }

            // Show welcome toast on page load
            setTimeout(() => {
                showToast('success', 'Welcome to TastyBites!', 'Order delicious food delivered right to your door!');
            }, 1000);

            // ===== EVENT LISTENERS =====
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Update active nav link
                    navLinks.forEach(link => link.classList.remove('active'));
                    this.classList.add('active');

                    const pageId = this.getAttribute('data-page');

                    // Show the corresponding page
                    pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === pageId) {
                            page.classList.add('active');

                            // Load specific content for each page
                            if (pageId === 'home') {
                                const menuContainer = page.querySelector('.menu-highlight');
                                if (menuContainer) renderMenuItems(menuContainer);
                            } else if (pageId === 'menu') {
                                const menuContainer = page.querySelector('.menu-highlight');
                                if (menuContainer) renderMenuItems(menuContainer);
                            } else if (pageId === 'checkout') {
                                renderOrderSummary();
                            }
                        }
                    });

                    // Close checkout overlay if open
                    if (checkoutOverlay.classList.contains('active')) {
                        closeCheckoutOverlay();
                    }
                });
            });

            // Cart icon
            cartIcon.addEventListener('click', function () {
                // Set checkout as active in nav
                navLinks.forEach(l => l.classList.remove('active'));
                document.querySelector('a[data-page="checkout"]').classList.add('active');

                // Show checkout page
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === 'checkout') {
                        page.classList.add('active');
                        renderOrderSummary();
                    }
                });
            });

            // Admin access button
            adminAccessBtn.addEventListener('click', function() {
                if (!isAdminLoggedIn) {
                    loginModal.classList.add('active');
                } else {
                    adminPanel.classList.add('active');
                    updateAdminPanel();
                }
            });

            // Admin close button
            adminClose.addEventListener('click', function() {
                adminPanel.classList.remove('active');
            });

            // Login form submission
            adminLoginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;
                
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    // Successful login
                    isAdminLoggedIn = true;
                    sessionStorage.setItem('adminLoggedIn', 'true');
                    
                    // Update last login
                    adminCredentials.lastLogin = new Date().toISOString();
                    localStorage.setItem('adminCredentials', JSON.stringify(adminCredentials));
                    
                    // Close login modal and open admin panel
                    loginModal.classList.remove('active');
                    adminPanel.classList.add('active');
                    
                    // Clear form
                    adminLoginForm.reset();
                    loginError.classList.remove('active');
                    
                    // Load and display orders
                    updateAdminPanel();
                    
                    // Start auto-refresh
                    startAutoRefresh();
                    
                    // Show welcome message
                    showToast('success', 'Admin Access Granted', 'Welcome to TastyBites Admin Panel!');
                } else {
                    // Failed login
                    loginError.classList.add('active');
                    setTimeout(() => {
                        loginError.classList.remove('active');
                    }, 3000);
                }
            });

            // Admin tabs
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab
                    adminTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding content
                    adminContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}Tab`) {
                            content.classList.add('active');
                        }
                    });
                });
            });

            // Modal close buttons
            modalClose.addEventListener('click', closeCheckoutOverlay);
            closeDetailsBtn.addEventListener('click', function() {
                orderDetailsModal.classList.remove('active');
            });
            previewClose.addEventListener('click', function() {
                imagePreviewModal.classList.remove('active');
            });

            // Close overlay when clicking outside
            checkoutOverlay.addEventListener('click', function (e) {
                if (e.target === checkoutOverlay) {
                    closeCheckoutOverlay();
                }
            });

            // Proceed to payment button
            proceedToPaymentBtn.addEventListener('click', openCheckoutOverlay);

            // Payment method selection
            cardOption.addEventListener('click', function () {
                cardOption.classList.add('selected');
                transferOption.classList.remove('selected');
                cardDetails.style.display = 'block';
                bankDetails.style.display = 'none';
                document.getElementById('paymentNote').textContent = "Card payment will be processed securely.";
            });

            transferOption.addEventListener('click', function () {
                transferOption.classList.add('selected');
                cardOption.classList.remove('selected');
                cardDetails.style.display = 'none';
                bankDetails.style.display = 'block';
                document.getElementById('paymentNote').textContent = "After transfer, upload proof of payment for verification.";
            });

            // Clear cart button
            clearCartBtn.addEventListener('click', clearCart);

            // Return home buttons
            returnHomePending.addEventListener('click', function () {
                closeCheckoutOverlay();
                document.querySelector('a[data-page="home"]').click();
            });

            returnHomeSuccess.addEventListener('click', function () {
                closeCheckoutOverlay();
                document.querySelector('a[data-page="home"]').click();
            });

            // Edit details button
            editDetails.addEventListener('click', function () {
                showPaymentState(checkoutForm);
                progressSteps.style.display = 'none';
            });

            // Retry payment
            retryPayment.addEventListener('click', function () {
                showPaymentState(checkoutForm);
                progressSteps.style.display = 'none';
            });

            // Checkout form submission
            checkoutForm.addEventListener('submit', function (e) {
                e.preventDefault();

                if (!cardOption.classList.contains('selected') && !transferOption.classList.contains('selected')) {
                    alert('Please select a payment method.');
                    return;
                }

                const customerName = document.getElementById('fullName').value;
                const address = document.getElementById('address').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('emailCheckout').value;
                const paymentMethod = cardOption.classList.contains('selected') ? 'Card' : 'Bank Transfer';
                const orderId = 'TB' + Date.now() + Math.floor(Math.random() * 1000);

                const orderData = {
                    orderId: orderId,
                    customerName: customerName,
                    address: address,
                    phone: phone,
                    email: email,
                    paymentMethod: paymentMethod,
                    items: [...cart],
                    total: document.getElementById('orderTotal').textContent,
                    status: 'pending',
                    deliveryCode: null,
                    orderTime: new Date().toISOString(),
                    paymentVerified: false
                };

                // Handle payment proof upload for bank transfers
                if (paymentMethod === 'Bank Transfer') {
                    const fileInput = document.getElementById('transferProof');
                    if (fileInput.files.length > 0) {
                        const file = fileInput.files[0];
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            orderData.paymentProof = e.target.result;
                            processOrderSubmission(orderData, paymentMethod);
                        };
                        reader.readAsDataURL(file);
                    } else {
                        processOrderSubmission(orderData, paymentMethod);
                    }
                } else {
                    processOrderSubmission(orderData, paymentMethod);
                }
            });

            // Contact form submission
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const message = document.getElementById('message').value;

                    if (!name || !email || !message) {
                        showToast('error', 'Missing Information', 'Please fill in all fields before submitting.');
                        return;
                    }

                    if (!validateEmail(email)) {
                        showToast('error', 'Invalid Email', 'Please enter a valid email address.');
                        return;
                    }

                    // Show success toast
                    showToast('success', 'Message Sent!', 'Thank you for your message! We will get back to you soon.', 7000);

                    // Reset form
                    this.reset();
                });
            }

            // Announcement close
            if (announcementClose) {
                announcementClose.addEventListener('click', function () {
                    announcementBanner.style.display = 'none';
                });
            }

            // Verify order button
            verifyOrderBtn.addEventListener('click', function() {
                if (currentAdminViewOrderId) {
                    verifyOrder(currentAdminViewOrderId);
                }
            });

            // Reject order button
            rejectOrderBtn.addEventListener('click', function() {
                if (currentAdminViewOrderId) {
                    rejectOrder();
                }
            });

            // Close modals when clicking outside
            [loginModal, orderDetailsModal, imagePreviewModal].forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Escape key closes modals
                if (e.key === 'Escape') {
                    loginModal.classList.remove('active');
                    adminPanel.classList.remove('active');
                    orderDetailsModal.classList.remove('active');
                    imagePreviewModal.classList.remove('active');
                }
                
                // Ctrl+Shift+A opens admin panel
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    e.preventDefault();
                    adminAccessBtn.click();
                }
            });

            // Auto-logout after 30 minutes
            setInterval(() => {
                if (isAdminLoggedIn) {
                    const lastActivity = sessionStorage.getItem('lastAdminActivity') || Date.now();
                    const thirtyMinutes = 30 * 60 * 1000;
                    
                    if (Date.now() - lastActivity > thirtyMinutes) {
                        isAdminLoggedIn = false;
                        sessionStorage.removeItem('adminLoggedIn');
                        adminPanel.classList.remove('active');
                        showToast('warning', 'Session Expired', 'Your admin session has expired. Please log in again.');
                    }
                }
            }, 60000);

            // Update last activity time
            document.addEventListener('click', function() {
                if (isAdminLoggedIn) {
                    sessionStorage.setItem('lastAdminActivity', Date.now());
                }
            });
        });

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>

    <script src="/script.js"></script>
    <script src="admin.js"></script>
    <!-- Add this line BEFORE your main script tag -->
<script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
<script src="cloud-storage.js"></script>
<script src="/fix.js"></script>
</body>

</html>