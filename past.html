<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TastyBites | Restaurant & Delivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #e74c3c;
            --primary-dark: #c0392b;
            --secondary: #2c3e50;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            flex: 1;
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 32px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            font-size: 18px;
            transition: color 0.3s;
        }

        nav a:hover,
        nav a.active {
            color: var(--primary);
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
            color: var(--dark);
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            min-height: calc(100vh - 200px);
            padding: 40px 0;
            flex: 1;
        }

        .page {
            display: none;
            min-height: 100%;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 12px 30px;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 600;
            font-size: 18px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #1a252f;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #219653;
        }

        .btn-warning {
            background-color: var(--warning);
        }

        .btn-warning:hover {
            background-color: #e67e22;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* ===== HOME PAGE ===== */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 100px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 50px;
            width: 100%;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 20px;
            max-width: 700px;
            margin: 0 auto 30px;
        }

        .page-title {
            font-size: 36px;
            margin-bottom: 30px;
            color: var(--dark);
            text-align: center;
        }

        /* ===== MENU ITEMS ===== */
        .menu-highlight {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
            width: 100%;
        }

        .menu-item {
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            width: 100%;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .menu-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .menu-item-content {
            padding: 20px;
        }

        .menu-item h3 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .menu-item p {
            color: #666;
            margin-bottom: 15px;
        }

        .menu-item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .add-to-cart {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: background-color 0.3s;
        }

        .add-to-cart:hover {
            background-color: var(--primary-dark);
        }

        /* ===== ABOUT PAGE ===== */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
            width: 100%;
        }

        .about-img {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            width: 100%;
        }

        .about-img img {
            width: 100%;
            height: auto;
            display: block;
        }

        .about-text h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        /* ===== CONTACT PAGE ===== */
        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            width: 100%;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .contact-icon {
            background-color: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* ===== CHECKOUT PAGE ===== */
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 40px;
            width: 100%;
        }

        .checkout-form {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        .payment-methods {
            margin: 30px 0;
        }

        .payment-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: border 0.3s;
        }

        .payment-option.selected {
            border-color: var(--primary);
            background-color: rgba(231, 76, 60, 0.05);
        }

        .payment-icon {
            font-size: 24px;
            margin-right: 15px;
            color: var(--dark);
        }

        .order-summary {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 100px;
            width: 100%;
        }

        .order-summary h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .order-item-details {
            flex: 1;
        }

        .remove-item {
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
        }

        .remove-item:hover {
            color: #c0392b;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: 700;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            color: var(--dark);
        }

        /* ===== PAYMENT PROCESSING STATES ===== */
        .payment-processing {
            display: none;
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .payment-processing h3 {
            color: var(--warning);
            margin-bottom: 20px;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--warning);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .payment-status {
            display: none;
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .payment-success {
            color: var(--success);
        }

        .payment-failed {
            color: var(--danger);
        }

        .status-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .delivery-code-container {
            display: none;
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .delivery-code {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: 10px;
            color: var(--primary);
            background-color: rgba(231, 76, 60, 0.1);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            border: 2px dashed var(--primary);
        }

        .order-confirmation {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--success);
        }

        /* ===== ANNOUNCEMENT BANNER ===== */
        .announcement-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: var(--warning);
            color: white;
            padding: 15px;
            text-align: center;
            z-index: 10000;
            display: none;
        }

        .announcement-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .announcement-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0 10px;
        }

        /* ===== FOOTER ===== */
        footer {
            background-color: var(--secondary);
            color: white;
            padding: 40px 0 20px;
            margin-top: 60px;
            width: 100%;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: white;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #bbb;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: white;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .social-icons a:hover {
            background-color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 14px;
        }

        /* ===== ADMIN PAGE STYLES ===== */
        .admin-page {
            padding: 20px;
            min-height: calc(100vh - 200px);
            width: 100%;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .admin-header h2 {
            color: var(--secondary);
            margin: 0;
        }

        .admin-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            min-height: 600px;
        }

        @media (max-width: 992px) {
            .admin-container {
                grid-template-columns: 1fr;
            }
        }

        .admin-sidebar {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
        }

        .admin-sidebar h3 {
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }

        .admin-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .admin-menu li {
            margin-bottom: 10px;
        }

        .admin-menu-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 12px 15px;
            background: none;
            border: none;
            border-radius: var(--border-radius);
            text-align: left;
            cursor: pointer;
            color: var(--dark);
            font-size: 16px;
            transition: all 0.3s;
        }

        .admin-menu-btn:hover {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--primary);
        }

        .admin-menu-btn.active {
            background-color: var(--primary);
            color: white;
        }

        .admin-menu-btn i {
            width: 20px;
            text-align: center;
        }

        .admin-main {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            overflow-y: auto;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        /* Dashboard Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            border-left: 4px solid var(--primary);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-card h3 {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-card p {
            color: var(--dark);
            font-weight: 600;
            margin: 0;
        }

        .stat-card.total-revenue {
            border-left-color: var(--success);
        }

        .stat-card.total-revenue h3 {
            color: var(--success);
        }

        .stat-card.pending-orders {
            border-left-color: var(--warning);
        }

        .stat-card.pending-orders h3 {
            color: var(--warning);
        }

        .stat-card.available-items {
            border-left-color: var(--success);
        }

        .stat-card.available-items h3 {
            color: var(--success);
        }

        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .action-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .action-card:hover {
            background-color: white;
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .action-card i {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .action-card h4 {
            color: var(--dark);
            margin-bottom: 10px;
        }

        .action-card p {
            color: #666;
            font-size: 14px;
            margin: 0;
        }

        /* Menu Management Table */
        .admin-table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .admin-table th {
            background-color: #f8f9fa;
            padding: 15px;
            text-align: left;
            color: var(--dark);
            font-weight: 600;
            border-bottom: 2px solid #eee;
        }

        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }

        .admin-table tr:hover {
            background-color: #f8f9fa;
        }

        .item-image-small {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
        }

        .availability-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .available-badge {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--success);
        }

        .unavailable-badge {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        /* Announcements Section */
        .announcement-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid var(--warning);
        }

        .announcement-card h4 {
            color: var(--warning);
            margin-bottom: 10px;
        }

        .announcement-card p {
            margin-bottom: 15px;
            color: var(--dark);
        }

        .announcement-meta {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 14px;
            margin-top: 15px;
        }

        .form-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 20px;
        }

        .form-card h4 {
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .form-check input {
            width: 18px;
            height: 18px;
        }

        .form-check label {
            margin: 0;
        }

        /* Orders Management */
        .orders-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            cursor: pointer;
            color: var(--dark);
            transition: all 0.3s;
        }

        .filter-btn:hover {
            background-color: #e9ecef;
        }

        .filter-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .order-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--warning);
        }

        .order-card.verified {
            border-left-color: var(--success);
        }

        .order-card.completed {
            border-left-color: #6c757d;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-header h4 {
            color: var(--dark);
            margin: 0;
        }

        .order-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .status-pending {
            background-color: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }

        .status-verified {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--success);
        }

        .status-completed {
            background-color: rgba(108, 117, 125, 0.1);
            color: #6c757d;
        }

        .order-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .order-detail {
            margin-bottom: 5px;
        }

        .order-detail strong {
            color: var(--dark);
            margin-right: 5px;
        }

        .order-items {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 15px;
        }

        .order-items ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .order-items li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .order-items li:last-child {
            border-bottom: none;
        }

        .order-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: var(--dark);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
        }

        .image-upload-area {
            border: 2px dashed #ddd;
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(231, 76, 60, 0.05);
        }

        .image-upload-area i {
            font-size: 48px;
            color: #ccc;
            margin-bottom: 15px;
            display: block;
        }

        .image-upload-area p {
            color: #666;
            margin: 0;
        }

        .image-preview {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: none;
        }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state i {
            font-size: 48px;
            color: #ddd;
            margin-bottom: 20px;
            display: block;
        }

        .empty-state h4 {
            color: #999;
            margin-bottom: 10px;
        }

        /* Admin Login */
        .admin-login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh;
            width: 100%;
        }

        .admin-login-box {
            background-color: white;
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .admin-login-box h2 {
            color: var(--secondary);
            margin-bottom: 30px;
        }

        .admin-login-box input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                padding: 0 30px;
            }
        }

        @media (max-width: 992px) {

            .checkout-container,
            .about-content,
            .contact-content {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .menu-highlight {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
                padding: 15px 0;
            }

            nav ul {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero {
                padding: 60px 20px;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .admin-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .admin-actions {
                grid-template-columns: 1fr;
            }

            .table-actions {
                flex-direction: column;
            }

            .order-details {
                grid-template-columns: 1fr;
            }

            .menu-highlight {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                gap: 20px;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }

            .hero {
                padding: 40px 15px;
            }

            .hero h1 {
                font-size: 28px;
            }

            .page-title {
                font-size: 28px;
            }

            .admin-main {
                padding: 15px;
            }

            .modal {
                padding: 20px;
            }

            .order-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            nav ul {
                gap: 10px;
                font-size: 16px;
            }

            .menu-highlight {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .checkout-form,
            .order-summary {
                padding: 20px;
            }

            .delivery-code {
                font-size: 36px;
                letter-spacing: 5px;
                padding: 15px;
            }
        }

        @media (max-width: 400px) {
            .logo {
                font-size: 24px;
            }

            .logo i {
                font-size: 28px;
            }

            nav ul {
                gap: 8px;
            }

            nav a {
                font-size: 16px;
            }

            .hero h1 {
                font-size: 24px;
            }

            .hero p {
                font-size: 16px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>

<body>
    <!-- Announcement Banner -->
    <div class="announcement-banner" id="announcementBanner">
        <div class="announcement-content">
            <div id="announcementText"></div>
            <button class="announcement-close" id="announcementClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" data-page="home">
                <i class="fas fa-utensils"></i>
                TastyBites
            </a>

            <nav>
                <ul>
                    <li><a href="#" data-page="home" class="active">Home</a></li>
                    <li><a href="#" data-page="menu">Menu</a></li>
                    <li><a href="#" data-page="about">About</a></li>
                    <li><a href="#" data-page="contact">Contact</a></li>
                    <li><a href="#" data-page="checkout">Checkout</a></li>
                    <li><a href="#" data-page="admin" id="adminNavLink"
                            style="color: var(--primary); font-weight: bold;">
                            <i class="fas fa-user-shield"></i> Admin
                        </a></li>
                </ul>
            </nav>

            <div class="cart-icon" id="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content container">
        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="hero">
                <h1>Delicious Food Delivered to Your Door</h1>
                <p>Experience the finest cuisine from the comfort of your home. Order online and get your meal delivered
                    fast with our secure delivery system.</p>
                <a href="#" class="btn" data-page="menu">View Our Menu</a>
            </div>

            <h2 class="page-title">Our Specialties</h2>
            <div class="menu-highlight">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </section>

        <!-- Menu Page -->
        <section id="menu" class="page">
            <h2 class="page-title">Our Full Menu</h2>
            <div class="menu-highlight">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </section>

        <!-- About Page -->
        <section id="about" class="page">
            <h2 class="page-title">About TastyBites</h2>
            <div class="about-content">
                <div class="about-img">
                    <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80"
                        alt="Restaurant interior">
                </div>
                <div class="about-text">
                    <h2>Our Story</h2>
                    <p>Founded in 2010, TastyBites started as a small family restaurant with a passion for creating
                        delicious meals using locally sourced ingredients. Over the years, we've grown into a beloved
                        local eatery known for our commitment to quality and flavor.</p>
                    <p>Our chefs combine traditional recipes with modern culinary techniques to create dishes that are
                        both comforting and exciting. We believe that good food brings people together, and we're
                        dedicated to making every meal a memorable experience.</p>
                    <p>Now with our online ordering system, we're bringing our delicious food right to your doorstep,
                        with the same quality and care you'd experience in our restaurant.</p>
                </div>
            </div>
        </section>

        <!-- Contact Page -->
        <section id="contact" class="page">
            <h2 class="page-title">Contact Us</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h2>Get In Touch</h2>
                    <p>We'd love to hear from you. Whether you have questions about our menu, want to provide feedback,
                        or need assistance with an order, our team is here to help.</p>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h3>Address</h3>
                            <p>123 Food Street, Culinary City, CC 10101</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h3>Phone</h3>
                            <p>(123) 456-7890</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3>Email</h3>
                            <p>info@tastybites.com</p>
                        </div>
                    </div>
                </div>

                <div class="contact-form">
                    <h2>Send us a Message</h2>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Your Name</label>
                            <input type="text" id="name" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Your Email</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" class="form-control" rows="5" required></textarea>
                        </div>

                        <button type="submit" class="btn">Send Message</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Checkout Page -->
        <section id="checkout" class="page">
            <h2 class="page-title">Checkout</h2>

            <div class="checkout-container">
                <div class="checkout-form">
                    <h2>Delivery Information</h2>
                    <form id="checkoutForm">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="address">Delivery Address</label>
                            <textarea id="address" class="form-control" rows="3" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="emailCheckout">Email Address</label>
                            <input type="email" id="emailCheckout" class="form-control" required>
                        </div>

                        <div class="payment-methods">
                            <h2>Payment Method</h2>

                            <div class="payment-option" id="cardOption">
                                <div class="payment-icon">
                                    <i class="far fa-credit-card"></i>
                                </div>
                                <div>
                                    <h3>Credit/Debit Card</h3>
                                    <p>Pay securely with your card</p>
                                </div>
                            </div>

                            <div class="payment-option" id="transferOption">
                                <div class="payment-icon">
                                    <i class="fas fa-university"></i>
                                </div>
                                <div>
                                    <h3>Bank Transfer</h3>
                                    <p>Transfer directly to our account</p>
                                </div>
                            </div>
                        </div>

                        <div id="cardDetails" style="display: none;">
                            <div class="form-group">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" id="cardNumber" class="form-control"
                                    placeholder="1234 5678 9012 3456">
                            </div>

                            <div class="form-group">
                                <label for="cardExpiry">Expiry Date</label>
                                <input type="text" id="cardExpiry" class="form-control" placeholder="MM/YY">
                            </div>

                            <div class="form-group">
                                <label for="cardCVC">CVC</label>
                                <input type="text" id="cardCVC" class="form-control" placeholder="123">
                            </div>
                        </div>

                        <div id="bankDetails" style="display: none;">
                            <div class="form-group">
                                <p><strong>Bank Transfer Instructions:</strong></p>
                                <p>Please transfer the total amount to the following account:</p>
                                <p>Bank: Food Bank<br>
                                    Account Name: TastyBites Restaurant<br>
                                    Account Number: 1234-5678-9012-3456<br>
                                    Reference: Your Order ID</p>
                                <p>Once transferred, please click "Confirm Payment" below.</p>
                                <div class="form-group">
                                    <label for="transferProof">Upload Proof of Payment (Screenshot/Receipt)</label>
                                    <input type="file" id="transferProof" class="form-control" accept="image/*">
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn" id="submitOrder">Submit Order for Payment
                            Verification</button>
                    </form>

                    <!-- Payment Processing State -->
                    <div class="payment-processing" id="paymentProcessing">
                        <div class="spinner"></div>
                        <h3>Processing Your Payment</h3>
                        <p>Please wait while we verify your payment. This may take a moment...</p>
                        <p id="paymentNote"></p>
                    </div>

                    <!-- Payment Status States -->
                    <div class="payment-status" id="paymentPending">
                        <div class="status-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Payment Verification Pending</h3>
                        <p>Your order has been received and is awaiting payment verification.</p>
                        <p><strong>Order ID:</strong> <span id="pendingOrderId"></span></p>
                        <p>We will notify you via email once your payment is verified and your delivery code is
                            generated.</p>
                        <p>For bank transfers, please complete the transfer and upload proof of payment if you haven't
                            already.</p>
                        <button class="btn btn-secondary" id="returnHomePending">Return to Home</button>
                    </div>

                    <div class="payment-status" id="paymentSuccess">
                        <div class="status-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3 class="payment-success">Payment Verified Successfully!</h3>
                        <p>Your payment has been confirmed. Your order is now being prepared.</p>
                        <p><strong>Order ID:</strong> <span id="successOrderId"></span></p>
                        <button class="btn btn-secondary" id="returnHomeSuccess">Return to Home</button>
                    </div>

                    <div class="payment-status" id="paymentFailed">
                        <div class="status-icon">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <h3 class="payment-failed">Payment Verification Failed</h3>
                        <p>We were unable to verify your payment. Please try again or contact customer support.</p>
                        <p><strong>Reason:</strong> <span id="failureReason">Payment not received or verification
                                failed</span></p>
                        <button class="btn btn-warning" id="retryPayment">Retry Payment</button>
                        <button class="btn btn-secondary" id="returnHomeFailed">Return to Home</button>
                    </div>

                    <!-- Delivery Code (Only shown after restaurant manually verifies payment) -->
                    <div class="delivery-code-container" id="deliveryCodeContainer">
                        <div class="order-confirmation">
                            <i class="fas fa-check-circle"></i> Order Confirmed & Payment Verified!
                        </div>
                        <p>Your payment has been verified and your order is now being prepared for delivery.</p>
                        <p>Your delivery code is:</p>
                        <div class="delivery-code" id="deliveryCode">1234</div>
                        <p>Please provide this 4-digit code to the delivery person when your food arrives.</p>
                        <p>You will receive a confirmation email with your order details.</p>
                        <button class="btn btn-secondary" id="returnHomeDelivery">Return to Home</button>
                    </div>
                </div>

                <div class="order-summary">
                    <h3>Your Order</h3>
                    <div id="orderItems">
                        <!-- Order items will be populated by JavaScript -->
                    </div>
                    <div class="order-total">
                        <span>Total:</span>
                        <span id="orderTotal">$0.00</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Page -->
        <section id="admin" class="page">
            <div class="admin-page">
                <div class="admin-header">
                    <h2>Admin Dashboard</h2>
                    <div id="adminLoginInfo" style="display: none;">
                        <span id="adminGreeting"></span>
                        <button class="btn btn-secondary" id="adminLogoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>

                <!-- Admin Login -->
                <div id="adminLoginContainer" class="admin-login-page">
                    <div class="admin-login-box">
                        <h2>Admin Login</h2>
                        <div class="form-group">
                            <input type="password" id="adminLoginPassword" class="form-control"
                                placeholder="Enter admin password">
                        </div>
                        <button class="btn" id="adminLoginBtn">Login</button>
                        <p style="margin-top: 15px; color: #666; font-size: 14px;">
                            Default password: <strong>admin123</strong>
                        </p>
                    </div>
                </div>

                <!-- Admin Dashboard -->
                <div id="adminDashboard" style="display: none;">
                    <div class="admin-container">
                        <!-- Sidebar -->
                        <div class="admin-sidebar">
                            <h3>Navigation</h3>
                            <ul class="admin-menu">
                                <li>
                                    <button class="admin-menu-btn active" data-section="dashboard">
                                        <i class="fas fa-tachometer-alt"></i>
                                        Dashboard
                                    </button>
                                </li>
                                <li>
                                    <button class="admin-menu-btn" data-section="menu">
                                        <i class="fas fa-utensils"></i>
                                        Menu Management
                                    </button>
                                </li>
                                <li>
                                    <button class="admin-menu-btn" data-section="announcements">
                                        <i class="fas fa-bullhorn"></i>
                                        Announcements
                                    </button>
                                </li>
                                <li>
                                    <button class="admin-menu-btn" data-section="orders">
                                        <i class="fas fa-clipboard-list"></i>
                                        Order Management
                                    </button>
                                </li>
                            </ul>

                            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                                <button class="btn" style="width: 100%;" id="addMenuItemBtn">
                                    <i class="fas fa-plus"></i> Add Menu Item
                                </button>
                            </div>
                        </div>

                        <!-- Main Content -->
                        <div class="admin-main">
                            <!-- Dashboard Section -->
                            <div id="dashboardSection" class="admin-section active">
                                <h3>Dashboard Overview</h3>

                                <div class="stats-grid">
                                    <div class="stat-card">
                                        <h3 id="statTotalOrders">0</h3>
                                        <p>Total Orders</p>
                                    </div>
                                    <div class="stat-card pending-orders">
                                        <h3 id="statPendingOrders">0</h3>
                                        <p>Pending Orders</p>
                                    </div>
                                    <div class="stat-card available-items">
                                        <h3 id="statAvailableItems">0</h3>
                                        <p>Available Items</p>
                                    </div>
                                    <div class="stat-card total-revenue">
                                        <h3 id="statTotalRevenue">$0</h3>
                                        <p>Total Revenue</p>
                                    </div>
                                </div>

                                <h3 style="margin-top: 40px;">Quick Actions</h3>
                                <div class="admin-actions">
                                    <div class="action-card" data-section="menu">
                                        <i class="fas fa-edit"></i>
                                        <h4>Edit Menu</h4>
                                        <p>Add, edit or remove menu items</p>
                                    </div>
                                    <div class="action-card" data-section="announcements">
                                        <i class="fas fa-bullhorn"></i>
                                        <h4>Post Announcement</h4>
                                        <p>Create site announcements</p>
                                    </div>
                                    <div class="action-card" data-section="orders">
                                        <i class="fas fa-clipboard-list"></i>
                                        <h4>Manage Orders</h4>
                                        <p>View and verify orders</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Menu Management Section -->
                            <div id="menuSection" class="admin-section">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                    <h3>Menu Management</h3>
                                    <button class="btn" id="addMenuItemBtn2">
                                        <i class="fas fa-plus"></i> Add New Item
                                    </button>
                                </div>

                                <div class="admin-table-container">
                                    <table class="admin-table">
                                        <thead>
                                            <tr>
                                                <th>Image</th>
                                                <th>Item Name</th>
                                                <th>Description</th>
                                                <th>Price</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="adminMenuTable">
                                            <!-- Menu items will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Announcements Section -->
                            <div id="announcementsSection" class="admin-section">
                                <h3>Site Announcements</h3>

                                <div id="currentAnnouncementContainer">
                                    <!-- Current announcement will be shown here -->
                                </div>

                                <div class="form-card">
                                    <h4>Create New Announcement</h4>
                                    <form id="announcementForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="announcementTitle">Announcement Title</label>
                                                <input type="text" id="announcementTitle" class="form-control"
                                                    placeholder="e.g., Special Offer! 20% Off">
                                            </div>
                                            <div class="form-group">
                                                <label for="announcementActive">Status</label>
                                                <div class="form-check">
                                                    <input type="checkbox" id="announcementActive" checked>
                                                    <label for="announcementActive">Show on site load</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="announcementMessage">Announcement Message</label>
                                            <textarea id="announcementMessage" class="form-control"
                                                placeholder="Enter your announcement message here..."></textarea>
                                        </div>

                                        <button type="submit" class="btn btn-success">
                                            <i class="fas fa-bullhorn"></i> Post Announcement
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <!-- Orders Management Section -->
                            <div id="ordersSection" class="admin-section">
                                <h3>Order Management</h3>

                                <div class="orders-filter">
                                    <button class="filter-btn active" data-filter="all">All Orders</button>
                                    <button class="filter-btn" data-filter="pending">Pending</button>
                                    <button class="filter-btn" data-filter="verified">Verified</button>
                                    <button class="filter-btn" data-filter="completed">Completed</button>
                                </div>

                                <div id="ordersList">
                                    <!-- Orders will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Edit Menu Item Modal -->
    <div class="modal-overlay" id="editMenuItemModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Edit Menu Item</h3>
                <button class="modal-close" id="modalCloseBtn">&times;</button>
            </div>

            <form id="editMenuItemForm">
                <input type="hidden" id="editItemId">

                <div class="image-upload-area" id="imageUploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload image or drag and drop</p>
                    <p style="font-size: 12px; margin-top: 5px;">JPG, PNG or WebP up to 5MB</p>
                    <input type="file" id="itemImageUpload" accept="image/*" style="display: none;">
                </div>

                <img id="itemImagePreview" class="image-preview" src="" alt="Preview">

                <div class="form-row">
                    <div class="form-group">
                        <label for="editItemName">Item Name</label>
                        <input type="text" id="editItemName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="editItemPrice">Price ($)</label>
                        <input type="number" id="editItemPrice" class="form-control" step="0.01" min="0" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="editItemDescription">Description</label>
                    <textarea id="editItemDescription" class="form-control" required></textarea>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="editItemAvailable" checked>
                    <label for="editItemAvailable">Available for ordering</label>
                </div>

                <div class="modal-footer">
                    <div>
                        <button type="button" class="btn btn-danger" id="deleteItemBtn" style="display: none;">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
                        <button type="submit" class="btn">Save Changes</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>TastyBites</h3>
                    <p>Delivering delicious meals since 2010. Quality ingredients, authentic flavors, and exceptional
                        service.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-page="home">Home</a></li>
                        <li><a href="#" data-page="menu">Menu</a></li>
                        <li><a href="#" data-page="about">About Us</a></li>
                        <li><a href="#" data-page="contact">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Food Street, Culinary City</li>
                        <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                        <li><i class="fas fa-envelope"></i> info@tastybites.com</li>
                        <li><i class="fas fa-clock"></i> Mon-Sun: 10am - 11pm</li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2023 TastyBites Restaurant. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ===== DATA MANAGEMENT =====
        // Restaurant menu data
        let menuItems = JSON.parse(localStorage.getItem('menuItems')) || [
            {
                id: 1,
                name: "Margherita Pizza",
                description: "Classic pizza with tomato sauce, mozzarella, and fresh basil",
                price: 12.99,
                image: "https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 2,
                name: "Grilled Salmon",
                description: "Fresh salmon with lemon butter sauce and seasonal vegetables",
                price: 18.50,
                image: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 3,
                name: "Beef Burger",
                description: "Juicy beef patty with cheese, lettuce, tomato, and special sauce",
                price: 14.75,
                image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1398&q=80",
                available: true
            },
            {
                id: 4,
                name: "Caesar Salad",
                description: "Crisp romaine lettuce with Caesar dressing, croutons, and parmesan",
                price: 9.99,
                image: "https://images.unsplash.com/photo-1546793665-c74683f339c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1374&q=80",
                available: true
            },
            {
                id: 5,
                name: "Chicken Tikka Masala",
                description: "Tender chicken in a rich, creamy tomato and spice sauce",
                price: 16.25,
                image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?ixlib=rb-4.0.3&auto=format&fit=crop&w=1371&q=80",
                available: true
            },
            {
                id: 6,
                name: "Chocolate Lava Cookie",
                description: "Warm chocolate cake with a molten center, served with vanilla ice cream",
                price: 8.50,
                image: "https://images.unsplash.com/photo-1700649405390-574054e0d190?blend=000000&blend-alpha=10&blend-mode=normal&blend-w=1&crop=faces%2Cedges&h=630&mark=https:%2F%2Fimages.unsplash.com%2Fopengraph%2Flogo.png&mark-align=top%2Cleft&mark-pad=50&mark-w=64&w=1200&auto=format&fit=crop&q=60&ixid=M3wxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNzAwNjcxMjk3fA&ixlib=rb-4.0.3",
                available: true
            }
        ];

        // Announcements data
        let announcements = JSON.parse(localStorage.getItem('announcements')) || [];

        // Shopping cart
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Orders database
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let pendingOrders = JSON.parse(localStorage.getItem('pendingOrders')) || [];

        // Admin state
        let isAdminLoggedIn = sessionStorage.getItem('adminLoggedIn') === 'true';

        // ===== DOM ELEMENTS =====
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('nav a');
        const cartIcon = document.getElementById('cart-icon');
        const cartCount = document.querySelector('.cart-count');
        const menuHighlight = document.querySelectorAll('.menu-highlight');
        const orderItems = document.getElementById('orderItems');
        const orderTotal = document.getElementById('orderTotal');
        const checkoutForm = document.getElementById('checkoutForm');
        const paymentProcessing = document.getElementById('paymentProcessing');
        const paymentPending = document.getElementById('paymentPending');
        const paymentSuccess = document.getElementById('paymentSuccess');
        const paymentFailed = document.getElementById('paymentFailed');
        const deliveryCodeContainer = document.getElementById('deliveryCodeContainer');
        const deliveryCode = document.getElementById('deliveryCode');
        const cardOption = document.getElementById('cardOption');
        const transferOption = document.getElementById('transferOption');
        const cardDetails = document.getElementById('cardDetails');
        const bankDetails = document.getElementById('bankDetails');
        const submitOrder = document.getElementById('submitOrder');
        const retryPayment = document.getElementById('retryPayment');

        // New return home buttons
        const returnHomePending = document.getElementById('returnHomePending');
        const returnHomeSuccess = document.getElementById('returnHomeSuccess');
        const returnHomeFailed = document.getElementById('returnHomeFailed');
        const returnHomeDelivery = document.getElementById('returnHomeDelivery');

        // Admin elements
        const adminLoginContainer = document.getElementById('adminLoginContainer');
        const adminDashboard = document.getElementById('adminDashboard');
        const adminLoginPassword = document.getElementById('adminLoginPassword');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const adminLogoutBtn = document.getElementById('adminLogoutBtn');
        const adminLoginInfo = document.getElementById('adminLoginInfo');
        const adminGreeting = document.getElementById('adminGreeting');
        const adminMenuBtns = document.querySelectorAll('.admin-menu-btn');
        const adminSections = document.querySelectorAll('.admin-section');
        const actionCards = document.querySelectorAll('.action-card');
        const filterBtns = document.querySelectorAll('.filter-btn');

        // Admin table elements
        const adminMenuTable = document.getElementById('adminMenuTable');
        const ordersList = document.getElementById('ordersList');
        const addMenuItemBtn = document.getElementById('addMenuItemBtn');
        const addMenuItemBtn2 = document.getElementById('addMenuItemBtn2');

        // Modal elements
        const editMenuItemModal = document.getElementById('editMenuItemModal');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        const cancelEditBtn = document.getElementById('cancelEditBtn');
        const editMenuItemForm = document.getElementById('editMenuItemForm');
        const imageUploadArea = document.getElementById('imageUploadArea');
        const itemImageUpload = document.getElementById('itemImageUpload');
        const itemImagePreview = document.getElementById('itemImagePreview');
        const deleteItemBtn = document.getElementById('deleteItemBtn');

        // Stats elements
        const statTotalOrders = document.getElementById('statTotalOrders');
        const statPendingOrders = document.getElementById('statPendingOrders');
        const statAvailableItems = document.getElementById('statAvailableItems');
        const statTotalRevenue = document.getElementById('statTotalRevenue');

        // Announcement elements
        const announcementForm = document.getElementById('announcementForm');
        const currentAnnouncementContainer = document.getElementById('currentAnnouncementContainer');
        const announcementBanner = document.getElementById('announcementBanner');
        const announcementText = document.getElementById('announcementText');
        const announcementClose = document.getElementById('announcementClose');

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function () {
            // Save default menu items if not already saved
            if (!localStorage.getItem('menuItems')) {
                localStorage.setItem('menuItems', JSON.stringify(menuItems));
            }

            // Check for active announcement
            checkActiveAnnouncement();

            // Render menu items
            renderMenuItems();

            // Update cart count
            updateCartCount();

            // Setup event listeners
            setupEventListeners();

            // Render cart items on checkout page
            renderOrderSummary();

            // Update pending orders count
            updatePendingOrdersCount();

            // Check if there's an order in progress
            checkOrderInProgress();

            // Check admin login status
            checkAdminLogin();
        });

        // ===== FUNCTIONS =====

        // Reset the site to normal state
        function resetSiteToNormal() {
            // Clear any session storage
            sessionStorage.removeItem('currentOrderId');

            // Reset checkout form
            if (checkoutForm) checkoutForm.style.display = 'block';

            // Hide all payment status containers
            if (paymentProcessing) paymentProcessing.style.display = 'none';
            if (paymentPending) paymentPending.style.display = 'none';
            if (paymentSuccess) paymentSuccess.style.display = 'none';
            if (paymentFailed) paymentFailed.style.display = 'none';
            if (deliveryCodeContainer) deliveryCodeContainer.style.display = 'none';

            // Reset checkout form inputs
            const formInputs = checkoutForm.querySelectorAll('input, textarea');
            formInputs.forEach(input => {
                if (input.type !== 'submit') {
                    input.value = '';
                }
            });

            // Reset payment selection
            if (cardOption) cardOption.classList.remove('selected');
            if (transferOption) transferOption.classList.remove('selected');
            if (cardDetails) cardDetails.style.display = 'none';
            if (bankDetails) bankDetails.style.display = 'none';

            // Navigate to home page
            navLinks.forEach(link => link.classList.remove('active'));
            document.querySelector('a[data-page="home"]').classList.add('active');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById('home').classList.add('active');

            // Re-render menu items
            renderMenuItems();

            // Update cart count
            updateCartCount();
        }

        // Check admin login status
        function checkAdminLogin() {
            if (isAdminLoggedIn) {
                showAdminDashboard();
                loadAdminDashboard();
            } else {
                showAdminLogin();
            }
        }

        // Show admin login screen
        function showAdminLogin() {
            adminLoginContainer.style.display = 'flex';
            adminDashboard.style.display = 'none';
            adminLoginInfo.style.display = 'none';
        }

        // Show admin dashboard
        function showAdminDashboard() {
            adminLoginContainer.style.display = 'none';
            adminDashboard.style.display = 'block';
            adminLoginInfo.style.display = 'block';
            adminGreeting.textContent = `Welcome, Admin!`;
        }

        // Load admin dashboard data
        function loadAdminDashboard() {
            // Calculate stats
            const totalOrders = orders.length + pendingOrders.length;
            const pendingOrdersCount = pendingOrders.filter(order => !order.paymentVerified).length;
            const availableItemsCount = menuItems.filter(item => item.available).length;

            // Calculate total revenue
            let totalRevenue = 0;
            orders.forEach(order => {
                const totalValue = parseFloat(order.total.replace('$', '')) || 0;
                totalRevenue += totalValue;
            });

            // Update stats
            if (statTotalOrders) statTotalOrders.textContent = totalOrders;
            if (statPendingOrders) statPendingOrders.textContent = pendingOrdersCount;
            if (statAvailableItems) statAvailableItems.textContent = availableItemsCount;
            if (statTotalRevenue) statTotalRevenue.textContent = '$' + totalRevenue.toFixed(2);

            // Load menu items table
            loadAdminMenuTable();

            // Load current announcement
            loadCurrentAnnouncement();

            // Load orders
            loadOrders('all');
        }

        // Load menu items table
        function loadAdminMenuTable() {
            if (!adminMenuTable) return;

            adminMenuTable.innerHTML = '';

            if (menuItems.length === 0) {
                adminMenuTable.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <div class="empty-state">
                                <i class="fas fa-utensils"></i>
                                <h4>No menu items yet</h4>
                                <p>Add your first menu item to get started</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            menuItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${item.image}" alt="${item.name}" class="item-image-small">
                    </td>
                    <td>
                        <strong>${item.name}</strong>
                    </td>
                    <td>
                        <p style="margin: 0; max-width: 200px; overflow: hidden; text-overflow: ellipsis;">${item.description}</p>
                    </td>
                    <td>
                        $${item.price.toFixed(2)}
                    </td>
                    <td>
                        <span class="availability-badge ${item.available ? 'available-badge' : 'unavailable-badge'}">
                            <i class="fas fa-${item.available ? 'check' : 'times'}"></i>
                            ${item.available ? 'Available' : 'Unavailable'}
                        </span>
                    </td>
                    <td>
                        <div class="table-actions">
                            <button class="btn btn-sm edit-menu-item" data-id="${item.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-secondary toggle-availability" data-id="${item.id}">
                                <i class="fas fa-toggle-${item.available ? 'on' : 'off'}"></i> ${item.available ? 'Disable' : 'Enable'}
                            </button>
                        </div>
                    </td>
                `;

                adminMenuTable.appendChild(row);
            });

            // Add event listeners
            document.querySelectorAll('.edit-menu-item').forEach(button => {
                button.addEventListener('click', function () {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    openEditMenuItemModal(itemId);
                });
            });

            document.querySelectorAll('.toggle-availability').forEach(button => {
                button.addEventListener('click', function () {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    toggleItemAvailability(itemId);
                });
            });
        }

        // Load current announcement
        function loadCurrentAnnouncement() {
            if (!currentAnnouncementContainer) return;

            currentAnnouncementContainer.innerHTML = '';

            // Get the latest active announcement
            const activeAnnouncements = announcements.filter(a => a.active);

            if (activeAnnouncements.length === 0) {
                currentAnnouncementContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bullhorn"></i>
                        <h4>No active announcement</h4>
                        <p>Create an announcement to show on your site</p>
                    </div>
                `;
                return;
            }

            const latestAnnouncement = activeAnnouncements[activeAnnouncements.length - 1];

            currentAnnouncementContainer.innerHTML = `
                <div class="announcement-card">
                    <h4>Current Active Announcement</h4>
                    <p><strong>${latestAnnouncement.title}</strong></p>
                    <p>${latestAnnouncement.message}</p>
                    <div class="announcement-meta">
                        <span>Posted: ${new Date(latestAnnouncement.date).toLocaleDateString()}</span>
                        <button class="btn btn-sm btn-danger" id="removeAnnouncementBtn">
                            <i class="fas fa-times"></i> Remove
                        </button>
                    </div>
                </div>
            `;

            // Add event listener to remove button
            const removeBtn = document.getElementById('removeAnnouncementBtn');
            if (removeBtn) {
                removeBtn.addEventListener('click', function () {
                    removeActiveAnnouncement();
                });
            }
        }

        // Load orders
        function loadOrders(filter) {
            if (!ordersList) return;

            ordersList.innerHTML = '';

            // Combine pending and completed orders
            let allOrders = [...pendingOrders, ...orders];

            // Apply filter
            if (filter === 'pending') {
                allOrders = pendingOrders.filter(order => !order.paymentVerified);
            } else if (filter === 'verified') {
                allOrders = pendingOrders.filter(order => order.paymentVerified);
            } else if (filter === 'completed') {
                allOrders = orders;
            }

            // Sort by date (newest first)
            allOrders.sort((a, b) => new Date(b.orderTime) - new Date(a.orderTime));

            if (allOrders.length === 0) {
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h4>No orders found</h4>
                        <p>${filter === 'all' ? 'No orders have been placed yet' : `No ${filter} orders found`}</p>
                    </div>
                `;
                return;
            }

            allOrders.forEach(order => {
                const isPending = pendingOrders.includes(order);
                const isVerified = order.paymentVerified;
                const isCompleted = orders.includes(order);

                let statusClass = 'status-pending';
                let statusText = 'Pending';

                if (isVerified) {
                    statusClass = 'status-verified';
                    statusText = 'Verified';
                } else if (isCompleted) {
                    statusClass = 'status-completed';
                    statusText = 'Completed';
                }

                const orderCard = document.createElement('div');
                orderCard.className = `order-card ${isVerified ? 'verified' : isCompleted ? 'completed' : ''}`;
                orderCard.innerHTML = `
                    <div class="order-header">
                        <h4>Order #${order.orderId}</h4>
                        <span class="order-status ${statusClass}">
                            <i class="fas fa-${isVerified ? 'check-circle' : isCompleted ? 'clipboard-check' : 'clock'}"></i>
                            ${statusText}
                        </span>
                    </div>
                    
                    <div class="order-details">
                        <div class="order-detail">
                            <strong>Customer:</strong> ${order.customerName}
                        </div>
                        <div class="order-detail">
                            <strong>Phone:</strong> ${order.phone}
                        </div>
                        <div class="order-detail">
                            <strong>Total:</strong> ${order.total}
                        </div>
                        <div class="order-detail">
                            <strong>Payment:</strong> ${order.paymentMethod}
                        </div>
                    </div>
                    
                    <div class="order-items">
                        <strong>Items:</strong>
                        <ul>
                            ${order.items.map(item => `
                                <li>
                                    <span>${item.name} x${item.quantity}</span>
                                    <span>$${(item.price * item.quantity).toFixed(2)}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    ${isPending && !isVerified ? `
                        <div class="order-actions">
                            <button class="btn btn-success btn-sm verify-order" data-order-id="${order.orderId}">
                                <i class="fas fa-check"></i> Verify Payment
                            </button>
                            <button class="btn btn-danger btn-sm reject-order" data-order-id="${order.orderId}">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    ` : ''}
                    
                    ${isVerified && !isCompleted ? `
                        <div class="order-detail" style="margin-top: 15px;">
                            <strong>Delivery Code:</strong> 
                            <span style="font-size: 18px; font-weight: bold; color: var(--primary);">
                                ${order.deliveryCode}
                            </span>
                        </div>
                        <div class="order-actions" style="margin-top: 15px;">
                            <button class="btn btn-primary btn-sm send-delivery-code" data-order-id="${order.orderId}">
                                <i class="fas fa-paper-plane"></i> Send Delivery Code to Customer
                            </button>
                        </div>
                    ` : ''}
                `;

                ordersList.appendChild(orderCard);
            });

            // Add event listeners to order action buttons
            document.querySelectorAll('.verify-order').forEach(button => {
                button.addEventListener('click', function () {
                    const orderId = this.getAttribute('data-order-id');
                    verifyPayment(orderId);
                });
            });

            document.querySelectorAll('.reject-order').forEach(button => {
                button.addEventListener('click', function () {
                    const orderId = this.getAttribute('data-order-id');
                    rejectPayment(orderId);
                });
            });

            document.querySelectorAll('.send-delivery-code').forEach(button => {
                button.addEventListener('click', function () {
                    const orderId = this.getAttribute('data-order-id');
                    sendDeliveryCodeToCustomer(orderId);
                });
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Check if elements exist before adding listeners
            if (!checkoutForm) {
                console.error('Checkout form not found');
                return;
            }

            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    const pageId = this.getAttribute('data-page');

                    // Update active nav link
                    navLinks.forEach(link => link.classList.remove('active'));
                    this.classList.add('active');

                    // Show selected page
                    pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === pageId) {
                            page.classList.add('active');

                            // If checkout page, update order summary
                            if (pageId === 'checkout') {
                                renderOrderSummary();
                            }

                            // If admin page, check login
                            if (pageId === 'admin') {
                                checkAdminLogin();
                            }
                        }
                    });
                });
            });

            // Cart icon
            if (cartIcon) {
                cartIcon.addEventListener('click', function () {
                    navLinks.forEach(link => link.classList.remove('active'));
                    const checkoutLink = document.querySelector('a[data-page="checkout"]');
                    if (checkoutLink) checkoutLink.classList.add('active');

                    pages.forEach(page => page.classList.remove('active'));
                    const checkoutPage = document.getElementById('checkout');
                    if (checkoutPage) checkoutPage.classList.add('active');

                    renderOrderSummary();
                });
            }

            // Payment method selection
            if (cardOption) {
                cardOption.addEventListener('click', function () {
                    cardOption.classList.add('selected');
                    transferOption.classList.remove('selected');
                    cardDetails.style.display = 'block';
                    bankDetails.style.display = 'none';
                    const paymentNote = document.getElementById('paymentNote');
                    if (paymentNote) paymentNote.textContent = "Card payment will be processed securely.";
                });
            }

            if (transferOption) {
                transferOption.addEventListener('click', function () {
                    transferOption.classList.add('selected');
                    cardOption.classList.remove('selected');
                    cardDetails.style.display = 'none';
                    bankDetails.style.display = 'block';
                    const paymentNote = document.getElementById('paymentNote');
                    if (paymentNote) paymentNote.textContent = "After transfer, upload proof of payment for verification.";
                });
            }

            // Checkout form submission
            checkoutForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Check if cart is empty
                if (cart.length === 0) {
                    alert('Your cart is empty. Please add items before placing an order.');
                    return;
                }

                // Check if payment method is selected
                if (!cardOption.classList.contains('selected') && !transferOption.classList.contains('selected')) {
                    alert('Please select a payment method.');
                    return;
                }

                // Validate card details if card is selected
                if (cardOption.classList.contains('selected')) {
                    const cardNumber = document.getElementById('cardNumber').value;
                    const cardExpiry = document.getElementById('cardExpiry').value;
                    const cardCVC = document.getElementById('cardCVC').value;

                    if (!cardNumber || !cardExpiry || !cardCVC) {
                        alert('Please fill in all card details.');
                        return;
                    }

                    if (!validateCardDetails(cardNumber, cardExpiry, cardCVC)) {
                        alert('Please check your card details. Card number should be 16 digits, expiry in MM/YY format, and CVC 3-4 digits.');
                        return;
                    }
                }

                // Get customer details
                const customerName = document.getElementById('fullName').value;
                const address = document.getElementById('address').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('emailCheckout').value;
                const paymentMethod = cardOption.classList.contains('selected') ? 'Card' : 'Bank Transfer';

                // Generate order ID
                const orderId = 'TB' + Date.now() + Math.floor(Math.random() * 1000);

                // Create order object
                const orderData = {
                    orderId: orderId,
                    customerName: customerName,
                    address: address,
                    phone: phone,
                    email: email,
                    paymentMethod: paymentMethod,
                    items: [...cart],
                    total: orderTotal.textContent,
                    status: 'pending',
                    deliveryCode: null,
                    orderTime: new Date().toISOString(),
                    paymentVerified: false
                };

                // For card payments, simulate processing
                if (paymentMethod === 'Card') {
                    // Show processing state
                    checkoutForm.style.display = 'none';
                    if (paymentProcessing) paymentProcessing.style.display = 'block';

                    // Simulate card payment processing
                    setTimeout(() => {
                        const isSuccess = Math.random() > 0.2;

                        if (isSuccess) {
                            // Card payment successful - still needs verification
                            if (paymentProcessing) paymentProcessing.style.display = 'none';
                            if (paymentPending) {
                                paymentPending.style.display = 'block';
                                const pendingOrderId = document.getElementById('pendingOrderId');
                                if (pendingOrderId) pendingOrderId.textContent = orderId;
                            }

                            // Add to pending orders
                            orderData.paymentStatus = 'processing';
                            pendingOrders.push(orderData);
                            localStorage.setItem('pendingOrders', JSON.stringify(pendingOrders));

                            // Store order ID in session for reference
                            sessionStorage.setItem('currentOrderId', orderId);
                        } else {
                            // Card payment failed
                            if (paymentProcessing) paymentProcessing.style.display = 'none';
                            if (paymentFailed) {
                                paymentFailed.style.display = 'block';
                                const failureReason = document.getElementById('failureReason');
                                if (failureReason) failureReason.textContent = "Card payment declined. Please check your card details or try another payment method.";
                            }
                        }

                        // Update pending orders count
                        updatePendingOrdersCount();

                        // Update admin stats if admin is logged in
                        if (isAdminLoggedIn) {
                            loadAdminDashboard();
                        }
                    }, 3000);
                } else {
                    // Bank transfer - always goes to pending verification
                    checkoutForm.style.display = 'none';
                    if (paymentPending) {
                        paymentPending.style.display = 'block';
                        const pendingOrderId = document.getElementById('pendingOrderId');
                        if (pendingOrderId) pendingOrderId.textContent = orderId;
                    }

                    // Add to pending orders
                    orderData.paymentStatus = 'awaiting_transfer';
                    pendingOrders.push(orderData);
                    localStorage.setItem('pendingOrders', JSON.stringify(pendingOrders));

                    // Store order ID in session for reference
                    sessionStorage.setItem('currentOrderId', orderId);

                    // Update pending orders count
                    updatePendingOrdersCount();

                    // Update admin stats if admin is logged in
                    if (isAdminLoggedIn) {
                        loadAdminDashboard();
                    }
                }

                // Clear the cart after order submission
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
            });

            // Retry payment button
            if (retryPayment) {
                retryPayment.addEventListener('click', function () {
                    resetSiteToNormal();
                });
            }

            // Return to home buttons
            if (returnHomePending) {
                returnHomePending.addEventListener('click', resetSiteToNormal);
            }

            if (returnHomeSuccess) {
                returnHomeSuccess.addEventListener('click', resetSiteToNormal);
            }

            if (returnHomeFailed) {
                returnHomeFailed.addEventListener('click', resetSiteToNormal);
            }

            if (returnHomeDelivery) {
                returnHomeDelivery.addEventListener('click', resetSiteToNormal);
            }

            // Admin login
            if (adminLoginBtn) {
                adminLoginBtn.addEventListener('click', function () {
                    if (adminLoginPassword.value === 'admin123') {
                        isAdminLoggedIn = true;
                        sessionStorage.setItem('adminLoggedIn', 'true');
                        showAdminDashboard();
                        loadAdminDashboard();
                    } else {
                        alert('Incorrect password!');
                    }
                });
            }

            // Admin logout
            if (adminLogoutBtn) {
                adminLogoutBtn.addEventListener('click', function () {
                    isAdminLoggedIn = false;
                    sessionStorage.removeItem('adminLoggedIn');
                    showAdminLogin();
                    adminLoginPassword.value = '';
                });
            }

            // Admin sidebar navigation
            adminMenuBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const section = this.getAttribute('data-section');

                    // Update active button
                    adminMenuBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    // Show selected section
                    adminSections.forEach(s => s.classList.remove('active'));
                    const sectionElement = document.getElementById(`${section}Section`);
                    if (sectionElement) sectionElement.classList.add('active');
                });
            });

            // Quick action cards
            actionCards.forEach(card => {
                card.addEventListener('click', function () {
                    const section = this.getAttribute('data-section');

                    // Update active button
                    adminMenuBtns.forEach(b => {
                        b.classList.remove('active');
                        if (b.getAttribute('data-section') === section) {
                            b.classList.add('active');
                        }
                    });

                    // Show selected section
                    adminSections.forEach(s => s.classList.remove('active'));
                    const sectionElement = document.getElementById(`${section}Section`);
                    if (sectionElement) sectionElement.classList.add('active');
                });
            });

            // Order filter buttons
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const filter = this.getAttribute('data-filter');

                    // Update active filter button
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    // Load filtered orders
                    loadOrders(filter);
                });
            });

            // Add menu item buttons
            [addMenuItemBtn, addMenuItemBtn2].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function () {
                        openEditMenuItemModal('new');
                    });
                }
            });

            // Image upload area
            if (imageUploadArea) {
                imageUploadArea.addEventListener('click', function () {
                    itemImageUpload.click();
                });
            }

            if (itemImageUpload) {
                itemImageUpload.addEventListener('change', function (e) {
                    const file = e.target.files[0];
                    if (!file) return;

                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size must be less than 5MB');
                        this.value = '';
                        return;
                    }

                    // Check file type
                    if (!file.type.match('image.*')) {
                        alert('Please select an image file (JPG, PNG, or WebP)');
                        this.value = '';
                        return;
                    }

                    const reader = new FileReader();
                    reader.onload = function (event) {
                        itemImagePreview.src = event.target.result;
                        itemImagePreview.style.display = 'block';
                        imageUploadArea.style.display = 'none';
                    };
                    reader.onerror = function () {
                        alert('Error reading file. Please try another image.');
                        itemImageUpload.value = '';
                    };
                    reader.readAsDataURL(file);
                });
            }

            // Modal close buttons
            [modalCloseBtn, cancelEditBtn].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function () {
                        editMenuItemModal.classList.remove('active');
                        resetEditForm();
                    });
                }
            });

            // Edit menu item form submission
            if (editMenuItemForm) {
                editMenuItemForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const itemId = document.getElementById('editItemId').value;
                    const itemName = document.getElementById('editItemName').value;
                    const itemDescription = document.getElementById('editItemDescription').value;
                    const itemPrice = parseFloat(document.getElementById('editItemPrice').value);
                    const itemAvailable = document.getElementById('editItemAvailable').checked;
                    const itemImage = itemImagePreview.src || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80';

                    if (itemId === 'new') {
                        // Add new item
                        const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;

                        menuItems.push({
                            id: newId,
                            name: itemName,
                            description: itemDescription,
                            price: itemPrice,
                            image: itemImage,
                            available: itemAvailable
                        });
                    } else {
                        // Update existing item
                        const itemIndex = menuItems.findIndex(item => item.id === parseInt(itemId));
                        if (itemIndex !== -1) {
                            menuItems[itemIndex].name = itemName;
                            menuItems[itemIndex].description = itemDescription;
                            menuItems[itemIndex].price = itemPrice;
                            menuItems[itemIndex].image = itemImage;
                            menuItems[itemIndex].available = itemAvailable;
                        }
                    }

                    // Save to localStorage
                    localStorage.setItem('menuItems', JSON.stringify(menuItems));

                    // Close modal
                    editMenuItemModal.classList.remove('active');
                    resetEditForm();

                    // Reload admin dashboard
                    loadAdminDashboard();

                    // Update public menu
                    renderMenuItems();

                    alert('Menu item saved successfully!');
                });
            }

            // Delete menu item
            if (deleteItemBtn) {
                deleteItemBtn.addEventListener('click', function () {
                    const itemId = parseInt(document.getElementById('editItemId').value);

                    if (confirm('Are you sure you want to delete this menu item? This action cannot be undone.')) {
                        const itemIndex = menuItems.findIndex(item => item.id === itemId);
                        if (itemIndex !== -1) {
                            menuItems.splice(itemIndex, 1);
                            localStorage.setItem('menuItems', JSON.stringify(menuItems));

                            // Close modal
                            editMenuItemModal.classList.remove('active');
                            resetEditForm();

                            // Reload admin dashboard
                            loadAdminDashboard();

                            // Update public menu
                            renderMenuItems();

                            alert('Menu item deleted successfully!');
                        }
                    }
                });
            }

            // Announcement form submission
            if (announcementForm) {
                announcementForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const title = document.getElementById('announcementTitle').value;
                    const message = document.getElementById('announcementMessage').value;
                    const active = document.getElementById('announcementActive').checked;

                    if (!title || !message) {
                        alert('Please fill in both title and message fields.');
                        return;
                    }

                    // Create new announcement
                    const newAnnouncement = {
                        id: Date.now(),
                        title: title,
                        message: message,
                        active: active,
                        date: new Date().toISOString()
                    };

                    // Deactivate all other announcements if this one is active
                    if (active) {
                        announcements.forEach(announcement => {
                            announcement.active = false;
                        });
                    }

                    // Add new announcement
                    announcements.push(newAnnouncement);
                    localStorage.setItem('announcements', JSON.stringify(announcements));

                    // Reset form
                    announcementForm.reset();

                    // Reload announcement display
                    loadCurrentAnnouncement();

                    // Show announcement banner if active
                    if (active && announcementText) {
                        announcementText.textContent = `${title}: ${message}`;
                        if (announcementBanner) announcementBanner.style.display = 'block';
                    }

                    alert('Announcement posted successfully!');
                });
            }

            // Close announcement banner
            if (announcementClose) {
                announcementClose.addEventListener('click', function () {
                    if (announcementBanner) announcementBanner.style.display = 'none';
                });
            }

            // Contact form submission
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const message = document.getElementById('message').value;

                    if (!name || !email || !message) {
                        alert('Please fill in all fields.');
                        return;
                    }

                    if (!validateEmail(email)) {
                        alert('Please enter a valid email address.');
                        return;
                    }

                    alert('Thank you for your message! We will get back to you soon.');
                    this.reset();
                });
            }
        }

        // Render menu items
        function renderMenuItems() {
            const menuContainers = document.querySelectorAll('.menu-highlight');

            menuContainers.forEach(container => {
                container.innerHTML = '';

                // Filter to show only available items
                const availableItems = menuItems.filter(item => item.available);

                if (availableItems.length === 0) {
                    container.innerHTML = '<p class="empty-state" style="grid-column: 1 / -1; text-align: center; padding: 40px;">No menu items available at the moment. Please check back later.</p>';
                    return;
                }

                availableItems.forEach(item => {
                    const menuItem = document.createElement('div');
                    menuItem.className = 'menu-item';
                    menuItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="menu-item-content">
                            <h3>${item.name}</h3>
                            <p>${item.description}</p>
                            <div class="menu-item-price">
                                <span class="price">$${item.price.toFixed(2)}</span>
                                <button class="add-to-cart" data-id="${item.id}">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    `;

                    container.appendChild(menuItem);
                });

                // Add event listeners to NEWLY CREATED add-to-cart buttons
                container.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', function () {
                        const itemId = parseInt(this.getAttribute('data-id'));
                        addToCart(itemId);
                    });
                });
            });
        }

        // Add item to cart
        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);

            // Check if item is available
            if (!item.available) {
                alert('Sorry, this item is currently unavailable.');
                return;
            }

            const existingItem = cart.find(i => i.id === itemId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1
                });
            }

            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));

            // Update cart count
            updateCartCount();

            // Update order summary if on checkout page
            if (document.getElementById('checkout').classList.contains('active')) {
                renderOrderSummary();
            }

            // Show a quick confirmation
            alert(`${item.name} added to cart!`);
        }

        // Remove item from cart
        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex(i => i.id === itemId);

            if (itemIndex !== -1) {
                cart.splice(itemIndex, 1);

                // Save to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));

                // Update cart count
                updateCartCount();

                // Update order summary if on checkout page
                if (document.getElementById('checkout').classList.contains('active')) {
                    renderOrderSummary();
                }
            }
        }

        // Update cart count
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            if (cartCount) cartCount.textContent = count;
        }

        // Render order summary
        function renderOrderSummary() {
            if (!orderItems) return;

            orderItems.innerHTML = '';

            let total = 0;

            if (cart.length === 0) {
                orderItems.innerHTML = '<p>Your cart is empty. Add items from the menu.</p>';
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const orderItem = document.createElement('div');
                    orderItem.className = 'order-item';
                    orderItem.innerHTML = `
                        <div class="order-item-details">
                            <div><strong>${item.name}</strong></div>
                            <div>Qty: ${item.quantity}  $${item.price.toFixed(2)}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div>$${itemTotal.toFixed(2)}</div>
                            <button class="remove-item" data-id="${item.id}" title="Remove item">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;

                    orderItems.appendChild(orderItem);
                });

                // Add event listeners to remove buttons
                orderItems.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function () {
                        const itemId = parseInt(this.getAttribute('data-id'));
                        removeFromCart(itemId);
                    });
                });
            }

            if (orderTotal) orderTotal.textContent = `$${total.toFixed(2)}`;
        }

        // Toggle item availability
        function toggleItemAvailability(itemId) {
            const itemIndex = menuItems.findIndex(item => item.id === itemId);
            if (itemIndex === -1) return;

            menuItems[itemIndex].available = !menuItems[itemIndex].available;
            localStorage.setItem('menuItems', JSON.stringify(menuItems));

            // Reload admin menu table
            loadAdminMenuTable();

            // Update public menu
            renderMenuItems();

            // Update stats
            loadAdminDashboard();
        }

        // Open edit menu item modal
        function openEditMenuItemModal(itemId) {
            const modalTitle = document.getElementById('modalTitle');
            const editItemId = document.getElementById('editItemId');
            const editItemName = document.getElementById('editItemName');
            const editItemDescription = document.getElementById('editItemDescription');
            const editItemPrice = document.getElementById('editItemPrice');
            const editItemAvailable = document.getElementById('editItemAvailable');

            if (itemId === 'new') {
                // New item
                if (modalTitle) modalTitle.textContent = 'Add New Menu Item';
                if (editItemId) editItemId.value = 'new';
                if (editItemName) editItemName.value = '';
                if (editItemDescription) editItemDescription.value = '';
                if (editItemPrice) editItemPrice.value = '';
                if (editItemAvailable) editItemAvailable.checked = true;
                if (itemImagePreview) itemImagePreview.style.display = 'none';
                if (imageUploadArea) imageUploadArea.style.display = 'block';
                if (deleteItemBtn) deleteItemBtn.style.display = 'none';
            } else {
                // Edit existing item
                const item = menuItems.find(item => item.id === itemId);
                if (!item) return;

                if (modalTitle) modalTitle.textContent = 'Edit Menu Item';
                if (editItemId) editItemId.value = item.id;
                if (editItemName) editItemName.value = item.name;
                if (editItemDescription) editItemDescription.value = item.description;
                if (editItemPrice) editItemPrice.value = item.price;
                if (editItemAvailable) editItemAvailable.checked = item.available;
                if (itemImagePreview) {
                    itemImagePreview.src = item.image;
                    itemImagePreview.style.display = 'block';
                }
                if (imageUploadArea) imageUploadArea.style.display = 'none';
                if (deleteItemBtn) deleteItemBtn.style.display = 'block';
            }

            if (editMenuItemModal) editMenuItemModal.classList.add('active');
        }

        // Reset edit form
        function resetEditForm() {
            if (itemImagePreview) {
                itemImagePreview.style.display = 'none';
                itemImagePreview.src = '';
            }
            if (imageUploadArea) imageUploadArea.style.display = 'block';
            if (editMenuItemForm) editMenuItemForm.reset();
            if (itemImageUpload) itemImageUpload.value = ''; // Reset file input
        }

        // Verify payment
        function verifyPayment(orderId) {
            const orderIndex = pendingOrders.findIndex(order => order.orderId === orderId);

            if (orderIndex === -1) {
                alert('Order not found!');
                return;
            }

            // Get the order before modifying arrays
            const orderToVerify = { ...pendingOrders[orderIndex] };

            // Generate delivery code
            const deliveryCode = Math.floor(1000 + Math.random() * 9000);

            // Update order
            orderToVerify.paymentVerified = true;
            orderToVerify.deliveryCode = deliveryCode;
            orderToVerify.verificationTime = new Date().toISOString();
            orderToVerify.status = 'verified';

            // Move to completed orders
            orders.push(orderToVerify);

            // Remove from pending orders
            pendingOrders.splice(orderIndex, 1);

            // Update localStorage
            localStorage.setItem('pendingOrders', JSON.stringify(pendingOrders));
            localStorage.setItem('orders', JSON.stringify(orders));

            // Update admin dashboard
            loadAdminDashboard();

            alert(`Payment verified for order ${orderId}! Delivery code: ${deliveryCode}`);
        }

        // Send delivery code to customer
        function sendDeliveryCodeToCustomer(orderId) {
            const orderIndex = orders.findIndex(order => order.orderId === orderId);

            if (orderIndex === -1) {
                alert('Order not found!');
                return;
            }

            const order = orders[orderIndex];
            if (!order.deliveryCode) {
                alert('This order does not have a delivery code yet. Please verify payment first.');
                return;
            }

            // Simulate sending delivery code to customer
            alert(`Delivery code ${order.deliveryCode} has been sent to customer ${order.customerName} (${order.email}).`);

            // Update the order to completed
            order.status = 'completed';
            localStorage.setItem('orders', JSON.stringify(orders));

            // Update admin dashboard
            loadAdminDashboard();
        }

        // Reject payment
        function rejectPayment(orderId) {
            const orderIndex = pendingOrders.findIndex(order => order.orderId === orderId);

            if (orderIndex === -1) {
                alert('Order not found!');
                return;
            }

            const reason = prompt('Enter reason for rejection:');
            if (!reason) return;

            // Remove from pending orders
            pendingOrders.splice(orderIndex, 1);

            // Update localStorage
            localStorage.setItem('pendingOrders', JSON.stringify(pendingOrders));

            // Update admin dashboard
            loadAdminDashboard();

            alert(`Payment rejected for order ${orderId}!`);
        }

        // Update pending orders count
        function updatePendingOrdersCount() {
            const pendingCountNum = pendingOrders.filter(order => !order.paymentVerified).length;

            // Update admin stats if on dashboard
            if (isAdminLoggedIn && statPendingOrders) {
                statPendingOrders.textContent = pendingCountNum;
            }
        }

        // Check if there's an order in progress
        function checkOrderInProgress() {
            const currentOrderId = sessionStorage.getItem('currentOrderId');
            if (currentOrderId) {
                // Check if this order is in pending orders
                let pendingOrder = pendingOrders.find(order => order.orderId === currentOrderId);

                if (!pendingOrder) {
                    // Check if it's in completed orders
                    pendingOrder = orders.find(order => order.orderId === currentOrderId);
                }

                if (pendingOrder) {
                    // Show the appropriate status
                    if (pendingOrder.paymentVerified) {
                        // Show delivery code if payment was verified
                        if (checkoutForm) checkoutForm.style.display = 'none';
                        if (paymentProcessing) paymentProcessing.style.display = 'none';
                        if (paymentPending) paymentPending.style.display = 'none';
                        if (paymentSuccess) paymentSuccess.style.display = 'none';
                        if (paymentFailed) paymentFailed.style.display = 'none';
                        if (deliveryCodeContainer) {
                            deliveryCodeContainer.style.display = 'block';
                            if (deliveryCode) deliveryCode.textContent = pendingOrder.deliveryCode;
                        }
                    } else {
                        // Show pending status
                        if (checkoutForm) checkoutForm.style.display = 'none';
                        if (paymentProcessing) paymentProcessing.style.display = 'none';
                        if (paymentPending) {
                            paymentPending.style.display = 'block';
                            const pendingOrderId = document.getElementById('pendingOrderId');
                            if (pendingOrderId) pendingOrderId.textContent = currentOrderId;
                        }
                        if (paymentSuccess) paymentSuccess.style.display = 'none';
                        if (paymentFailed) paymentFailed.style.display = 'none';
                        if (deliveryCodeContainer) deliveryCodeContainer.style.display = 'none';
                    }
                }
            }
        }

        // Remove active announcement
        function removeActiveAnnouncement() {
            if (announcements.length === 0) return;

            // Find and remove active announcements
            announcements.forEach(announcement => {
                announcement.active = false;
            });

            localStorage.setItem('announcements', JSON.stringify(announcements));

            // Hide announcement banner
            if (announcementBanner) {
                announcementBanner.style.display = 'none';
            }

            // Reload announcement display
            loadCurrentAnnouncement();
        }

        // Check for active announcement on page load
        function checkActiveAnnouncement() {
            const activeAnnouncements = announcements.filter(a => a.active);
            if (activeAnnouncements.length > 0) {
                const latestAnnouncement = activeAnnouncements[activeAnnouncements.length - 1];
                if (announcementText) {
                    announcementText.textContent = `${latestAnnouncement.title}: ${latestAnnouncement.message}`;
                    if (announcementBanner) announcementBanner.style.display = 'block';
                }
            }
        }

        // ===== HELPER FUNCTIONS =====

        // Email validation
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Card validation
        function validateCardDetails(cardNumber, expiry, cvc) {
            // Simple validation - in production, use a proper library
            const cardRegex = /^[0-9]{16}$/;
            const expiryRegex = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
            const cvcRegex = /^[0-9]{3,4}$/;

            // Remove spaces from card number
            const cleanCardNumber = cardNumber.replace(/\s/g, '');

            return cardRegex.test(cleanCardNumber) &&
                expiryRegex.test(expiry) &&
                cvcRegex.test(cvc);
        }
    </script>
</body>

</html>